(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{1199:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAslJREFUSA3FVE1IVFEU/l4zJY3jT6USUWnmwkL7WVimKBnRUoTcaNKiP4iKGFCJCAJbtKidRFFkEsKAlMgYUSb2Y6aBhdkySaYfmzS1RiwXM76+M703vnnOK0cXHTjvnnvO933n3fvevQoWYIWFpQnfMVVNaimgZv2RUAY5epIRf7m72zOpyyp6MN9xS/G+PcFAoIH4dAuO12a3Hxp41t4p9ZgaaOId8+CpbLJXmiyxeIuItKqqTr9/sid15Yp2o3hleRketbjx/H4Lzte6YLfZdJ4iq5StnFcDskpuN9/N942MhhVyN2fjrOsU6q834ETtOZQUFaBif5neQMZ0+U7/bMC3302w63FXt5DCNjY+gUAgiNSUVXA6HEiId+Lj5+FwXQtK7eaMPqew1Nz0csl9MJGHfV9xs8kN1/GjUkZXz0s8fdEbimcfatbfVnCLQBEfo9f+mp6emiUChTvzcLiqAmfqLuLI6RrkbMrGsYOVRkgojtqAb7+N1Sr6D3qJoiiXVBXvQgztUbRrBwbfD+Heww709r1GJ7ewuCDfCGGsDEZtwMpJDXmF4m+12KONoeGLbwQbMzOwYf06JCclIm/7Vsi2mcxj1SBHA7bqBDmhjL36vLm1Da/6B9DmbsQTzx0EgzOovyG7GjavcKIeNG6RvEqaOFcwqlOiHbS0lBTExS3Fp2EfyNOh4YNm1cBPZAI9kQ3C94qwY70qrLZItKKaHP9kxZkLRalbu2b1hMOxHDa7bZrzfslJTb+HogpIkkv108VkFZbGelMIpaoHrEAxr8BKyCo/pwHfSL7LnLyVgJYP31FmXMRVoYlfJSieHqAnMbfMTDLM9d/mAnFd/CGGDLW5IUHX6As1L4kZZtWI35SAb2ZAjPNqrqLRyIloYCwYYzaWLTN+l58UChoxi4rZ4AFdtxkGmYsSNJMpmEN/Qx+n15jr/3X+G1/iW1I7jeCoAAAAAElFTkSuQmCC"},1200:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAoVJREFUSA1jZCADWFv78X5g+FoC1OrHwPBfBWIE4x0gvUmAgbvn6NFNn2HGMsIYxNJ6dm5Of//8mQdUL49Dz0NmFpakS4d27QPJk2QB1PA9ROj7D7TEBWQJ0RaAg+X/l8tAw+EujwoJYEiMCmfg5GBn2H3gMENr7ySGP3//ghwOAg8FGHl0mSFswiSfnEw1UJU/TKWulgbDxLZGhvb+yQzL1m5kyEyKY/j9+w/DpavXYUoEfjD+/s0E4xGiGRn+ww0HqX377j3Dnz9/GURFhBl4uLgYeLl5GB4/fYZujB/LfyBAF8XGN3P1Yfj27Ttc6tmLlwxzlyxnKMxMBYsdPn6S4eCxE3B5COO/CtE+QNPJYG1uypAcE8lQ0dTOkJJfyqCjqcGQFheFrowBZAELIxHg2/cfF5B121qaMdy5d59hy849DCfOnGPYd/gog52VBbISIJvxDhPQbHi0o8miczchCzx/8YpBWUmBQVFOlkGAn4/B1FCfARRsaGAT2cmUk4ODYXJnM4OFiRE4skERnF1WzfDoyVOYHeBkSrQFIF3YMpqYiAgDOzsrw5NnLxiQ0gvpGQ3mLFKLCpJTESj7g3IoKGNpqCqDCpsvEMx4gYGRsQkkByuHYI4iiwblHxAgpJlkHxAyEF2e5haAioorQFt/AXE2ME8cB7kAKOYFpJqBmAXExwJghSRGwsdQCwpHKEgHSQLZxUD8FyaIh/4OlIvHMBBNAOTC1UAcCsRsQA3zgXQCEIMirx6INwAxNgCSfwj08SdskihiQENnQF35GUp/AdJBKIoo4CCHMQ/QnMdA7Ad0GUrBRoH54NIUph8UwabUNBxkMCyZLgKyHYGGE04VIF0kAABxICC2ybjrCQAAAABJRU5ErkJggg=="},1201:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAYCAYAAAARfGZ1AAAAAXNSR0IArs4c6QAAAqVJREFUSA3dVE1rU1EQnUmCUalaKtWlCxW6tygF7apY+xEDhYSKVEEFEdwp4qIL3XThVy2C4E7qQnipxSQvkdQWC0UXUtz4D0QRRaGIsSXpu+N5IXNNHy+ldSVeSObOzJnJzJm5IfrvjpN1L03Pzu5er7FM1k1N5UsdzTCRMIdTLLaTyENTXukL81ub0ISY6gWrBy6serFYjJer5jL0I0K0A8lPENM7EvqgmKBk5j4R+kgk75npk0RoMp1IvFWcrbxcMbdF5A7AHUjYXgMI74Lc2+wDbATVbff9InyKPFp4Vijsq8XiK6YXVJtgjkymkgNnp0ulPavLlS8IvZk+OfhEMUGJuXwWkqfpZOIKOt/5s2K+GU9OAzfmY23loKANVKBFoqHe3q/EkWtxic/4erOD4OsUizz2/f39/T+YZQVF+p3UjuXcee4ugbtclKOP1LlZacibEeZxdDvqx1pa6olGPPFGNpt0Dd6WG0juc05R+evKyZOXoMWetZWD89Tg4Bvr3eQlk817bDC9+vkzULU0kU7+xVFsxwOsq43JZAtjsA00CWnYlmYItRtzGAMfzszP17bB/xEhM8zE3QoJyrW0BL0Nejo5cM8RmUgze74Zr9NAP5iq6w1Qe7UtWss6F02skKCudpWhyVFR1MkW7juue0iB4LzLyebvgg47MAzwxpTr9irGl5iIXZjQ5LG5uVYScx6r1aWBbFaPsdC5XO51Sy2Jzzl0PPfjignKUM6Henq+Ly4utnV2dlY1IJVM3IJtXG0+59D3q664RmkrR694/tSqzrCgoK1Rr22PUBx5fmkOWzmIegXGzmRy+W1keFkBYNhyrLYwmckVDsC+Bcu9oH6bPNay9apXXomJoW5ks3bwvKGDIpbwF30RL9wm31DgPwn6DYEgCf2rxBrlAAAAAElFTkSuQmCC"},1202:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAAXNSR0IArs4c6QAAARBJREFUOBHNk70NwjAUhAlQMgOUVBSIBZiCdVJnCzr2YAFEjUSgoKNG4kcy35kXZNALEaLhSSfbd+fzT5xWK6kQwhgswAGcrdV4nNjquxi7IAcX4JX4HHTqU1DMRBNuoAAT0LNWY/GqvDYIUcfRijJPPaN40+Xzj4mgO1AVXkjFSY8u/BX30iLqYlWTF+FtID268L9JjyGivo6q5xqMlB5dIZw8XxvyaMLQMyRcpW8S7tlV0NJGsyfrdyp95cps95uvdsU/coNEIuZA1fSO5rUhFtT0srXAPC4Vwo520BSY/msnJqwtIB6HfglUJfgc9mklTQYlUJXgP8O27Kyvd/R1ZVm2Z9IU7MDvpTvSbpR0B/rWqCD/teLCAAAAAElFTkSuQmCC"},1203:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAYCAYAAAAVibZIAAAAAXNSR0IArs4c6QAAAntJREFUOBHllO1LU3EUx8+5u3vQZUKbBWU1KQjc0qXQi6lxUee2QHpRbyPpbfQ3tFe96E+Q/oBggaGIDJts4QMFltKLIHuAGUWIIZaVu/f+Tuc3ude72oP01h/snsPvfM/nnN/TAA71cB1k9ZErI6fb2kOF42c6QhvrH3ONchpCo1oyZOp6gUFNiJhqO9vRfuf2rel8Pk+14FgrIOd7tMT5km7MAcGW2+UZ0mm3nwQ+QoQJb/jczeXxcb1afk1oV1/yggm6BH71N0H8RS63KQGRvqE4mwkAKrScDNxYymR+/Q2uCu3uS4RNMuTeFVVPy8hK/smWM5H3OAamMc0FV1vxyOjCwuR3Z/wfaLg/0Y2kz3LCmr/Vm3o+M7PtTLD8aCweNUBkAaHY7IOktRIZVyyRtF0Dgz0gynv4JugJJGoBpXZlcXbFpcAAuyd2fsOzXm00KOflqICaJjzg1t97A/5UPp/5sSep/V2dz73lG6EBUeeusSMLlEcFlIFuQFxenpr6aQka2YDaX5QaBdG+nhXQRoBqcU0DIeeFQJulVhM65zRtzLcpPl8mg3xyHhV693r+6QdLk06nRTg2CKSQDbUdS+S0nKBslNYXhWEUCMys/AlBaxdjw9ecOvaZud9pXejjucVTrL+EqFw/2uIO+JswyK/ppQC66oTyYQkS+53WXb6qKC75DpHoy1I2+02CeKnbDLEPpQwniVTsBm2nHPzPD3GnDLIL1e30oDV4JYL/suwGK6BccYcFvZHY8F0JNEqlYzXAnZaG91glII+Cin23K6Aq4n0TxEMiuLcH4+fAb5tcrk8WHAFfcXyMD7CsYSCxKgvNOGlpDrn9A3GV3wFkoTe4AAAAAElFTkSuQmCC"},1204:function(e,t,a){},1243:function(e,t,a){},1245:function(e,t,a){},1247:function(e,t,a){},1249:function(e,t,a){},1251:function(e,t,a){},1253:function(e,t,a){},1255:function(e,t,a){},1749:function(e,t,a){"use strict";a.r(t);var n=a(147),r=a(148),i=a(151),s=a(149),l=a(150),o=a(6),c=a.n(o),d=a(28),u=a(174),m=a(177),p=a(180),f=a(1199),v=a.n(f),h=a(1200),b=a.n(h),g=a(1201),E=a.n(g),O=a(1202),y=a.n(O),C=a(1203),N=a.n(C),A=(a(1204),function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=[N.a,E.a,y.a,b.a,v.a],t=[];return e.forEach(function(e,a){t.push(c.a.createElement(p.a.Item,{key:a},c.a.createElement("img",{alt:"",src:e})))}),window.location.pathname.includes("remoteConsulting")?null:c.a.createElement(o.Fragment,null,c.a.createElement("div",{className:"parent-footer"},c.a.createElement(u.a,{className:"footer",type:"flex",align:"middle"},c.a.createElement(m.a,{className:"footer-copyrights",xs:24,sm:0,md:12,lg:12,xl:12,xxl:12},c.a.createElement("p",null,"PEP 2019 \xa9 All Rights Reserved")),c.a.createElement(m.a,{xs:0,sm:24,md:0,lg:0,xl:0,xxl:0,style:{bottom:"0"}},c.a.createElement(p.a,{mode:"horizontal",style:{display:"flex",justifyContent:"space"}},t)))))}}]),t}(o.Component)),T=a(45),j=Object(T.b)(function(e){return{unauthorizedError:e.auth.unauthorizedError}},function(e){return{}})(A);function D(e){var t=function(t){function a(){var e,t;Object(n.a)(this,a);for(var r=arguments.length,l=new Array(r),o=0;o<r;o++)l[o]=arguments[o];return(t=Object(i.a)(this,(e=Object(s.a)(a)).call.apply(e,[this].concat(l)))).state={Component:a.Component},t}return Object(l.a)(a,t),Object(r.a)(a,[{key:"componentWillMount",value:function(){var t=this;this.state.Component||e().then(function(e){a.Component=e,t.setState({Component:e})})}},{key:"render",value:function(){var e=this.state.Component;return e?c.a.createElement(e,this.props):null}}]),a}(o.Component);return t.Component=null,t}var M,I,w,S,k,P,R,x,L,U=D(function(){return Promise.all([a.e(6),a.e(12)]).then(a.bind(null,1751)).then(function(e){return e.default})}),F=D(function(){return Promise.all([a.e(1),a.e(14),a.e(4),a.e(13)]).then(a.bind(null,1747)).then(function(e){return e.default})}),V=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(s.a)(t).call(this,e))).state={},a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.onAppStart)()}},{key:"render",value:function(){var e=this.props,t=e.authenticated,a=e.unauthorizedError;return!0!==t&&!1!==t?c.a.createElement("div",null,"Loading"):c.a.createElement(o.Fragment,null,!0===t?c.a.createElement(F,{unauthorizedError:a,authRedirection:this.props.authRedirection}):c.a.createElement(U,null),c.a.createElement(j,null))}}]),t}(o.Component),_=a(20),B=Object(T.b)(function(e){var t=e.auth;return{authenticated:t.authenticated,authenticatedUser:t.authenticated_user,authRedirection:t.authRedirection,unauthorizedError:t.unauthorizedError}},function(e){return{onAppStart:function(){e(Object(_.f)())}}})(V),Y=a(178),z=a(164),q=a(1),H=a(0),W=a.n(H),G=a(3),Q=a(158),J=a(186),K=a(46),X=a.n(K),Z=(a(256),a(2)),$=Object(d.c)({schedule:{id:"app.event.schedule",defaultMessage:"Schedule New"},cancel:{id:"app.event.cancel",defaultMessage:"Cancel"},addAppointment:{id:"app.event.addAppointment",defaultMessage:"Add Appointment"},addReminder:{id:"app.event.addReminder",defaultMessage:"Add Reminder"},chooseWhen:{id:"app.event.chooseWhen",defaultMessage:"Choose When"},appointment:{id:"add.event.appointment",defaultMessage:"Appointment"},reminder:{id:"add.event.reminder",defaultMessage:"Reminder"},reminderTitle:{id:"app.event.reminderTitle",defaultMessage:"Reminder Title"},alongWithPlaceHolder:{id:"app.event.reminderalongwith",defaultMessage:"Tag a patient or a doctor"},alongWithLabelAppointment:{id:"app.event.appointmentAlongWithLabel",defaultMessage:"Appointment with"},alongWithLabelReminder:{id:"app.event.reminderAlongWithLabel",defaultMessage:"Reminder with"},doesNotRepeat:{id:"app.event.doesNotRepeat",defaultMessage:"Does not repeat"},repeatsDaily:{id:"app.event.repeatsDaily",defaultMessage:"Repeats Daily"},repeatsWeekly:{id:"app.event.repeatsWeekly",defaultMessage:"Repeats Weekly"},repeatsMonthly:{id:"add.event.repeatsMonthly",defaultMessage:"Repeats Monthly"},repeatsYearly:{id:"add.event.repeatsYearly",defaultMessage:"Repeats Yearly"},appointmentType:{id:"add.event.appointmentType",defaultMessage:"Appointment Type"},repeatIntervalError:{id:"add.event.repeatIntervalError",defaultMessage:"Repeat Interval is required"},activity:{id:"add.event.activity",defaultMessage:"Activity"},followup:{id:"app.event.followup",defaultMessage:"Follow Up"},medication:{id:"add.event.medication",defaultMessage:"Medication"},materialDelivery:{id:"add.event.materialDelivery",defaultMessage:"Material Delivery"},visit:{id:"app.event.visit",defaultMessage:"Visit"},call:{id:"add.event.call",defaultMessage:"Phone Call"},textEmail:{id:"add.event.textEmail",defaultMessage:"Video Call"},from:{id:"app.event.from",defaultMessage:"From"},till:{id:"add.event.till",defaultMessage:"Till"},on:{id:"add.event.on",defaultMessage:"On"},at:{id:"app.event.at",defaultMessage:"At"},repeatsOn:{id:"add.event.repeatsOn",defaultMessage:"Repeats on:"},notes:{id:"add.event.notes",defaultMessage:"Write notes (optional)"},cancelAppointment:{id:"cancel.event.calendarCard",defaultMessage:"Cancel Appointment"},cancelReminder:{id:"cancel.event.Reminder",defaultMessage:"Cancel Reminder"},goback:{id:"cancel.all.event.calendarCard",defaultMessage:"Go Back"},contentAppt:{id:"cancel.modal.contentAppt",defaultMessage:"Please note that appointments once cancelled cannot be undone you may have to add new appointment in case you wanted to add similar appointment later."},messageAppt:{id:"cancel.modal.messageAppt",defaultMessage:"Are you sure you want to cancel the appointment?"},contentRem:{id:"cancel.modal.contentRem",defaultMessage:"Please note that reminders once cancelled cannot be undone you may have to add new reminder in case you wanted to add similar reminder later."},messageRem:{id:"cancel.modal.messageRem",defaultMessage:"Are you sure you want to cancel the reminder?"},alert:{id:"cancel.modal.alert",defaultMessage:"This action cannot be undone. For help, contact program admin"},buttonCancelThisOnly:{id:"cancel.modal.buttonCancelThisOnly",defaultMessage:"Cancel This Only"},buttonCancelAll:{id:"cancel.modal.buttonCancelAll",defaultMessage:"Cancel All"},remindMyCareCoach:{id:"add.event.remindCareCoach",defaultMessage:"Remind my Care Coach also"},forPatientApptType:{id:"event.modal.forPatientApptType",defaultMessage:"Follow Up appointment"},econsulting:{id:"add.event.econsulting",defaultMessage:"Online Video Call(E-consultation)"},reason:{id:"cancel.modal.reason",defaultMessage:"Write reason for cancelling this appointment"}}),ee=a(154),te=a(353),ae=a(205),ne=a(29),re=a(9),ie=a(570),se=a(167),le=a(162),oe=J.a.Group,ce=J.a.Button,de=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,l=new Array(r),o=0;o<r;o++)l[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(l)))).onChangeActivityType=function(e){e.preventDefault();var t=e.target.value,n=a.props,r=n.onChangeActivityType,i=n.data,s=(i=void 0===i?{}:i).mode,l=void 0===s?{}:s,o=n.activityMode,c={activityType:t},d=l[t]||[],u=!0,m=!1,p=void 0;try{for(var f,v=d[Symbol.iterator]();!(u=(f=v.next()).done);u=!0){var h=f.value,b=h.value;if(!1===h.disable){c=Object(q.a)({},c,{activityMode:b});break}}}catch(A){m=!0,p=A}finally{try{u||null==v.return||v.return()}finally{if(m)throw p}}var g=!0,E=!1,O=void 0;try{for(var y,C=d[Symbol.iterator]();!(g=(y=C.next()).done);g=!0){var N=y.value;b=N.value;if(!1===N.disable&&o===b){c=Object(q.a)({},c,{activityMode:b});break}}}catch(A){E=!0,O=A}finally{try{g||null==C.return||C.return()}finally{if(E)throw O}}r(c)},a.formatMessage=function(e){return a.props.intl.formatMessage(e)},a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.activityType,a=e.onChangeActivityType,n=e.data,r=(n=void 0===n?{}:n).mode,i=(void 0===r?{}:r)[t]||[],s=!0,l=!1,o=void 0;try{for(var c,d=i[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){var u=c.value,m=u.value;if(!1===u.disable){a({activityMode:m});break}}}catch(p){l=!0,o=p}finally{try{s||null==d.return||d.return()}finally{if(l)throw o}}}},{key:"render",value:function(){var e=this.props,t=e.disabledForEdit,a=e.data,n=(a=void 0===a?{}:a).activity,r=this.props.activityType,i=this.formatMessage,s=this.onChangeActivityType;return c.a.createElement(o.Fragment,null,c.a.createElement("div",{className:"label-color pb5 fontsize12"},i($.appointmentType)),c.a.createElement(oe,{className:"radio-group-tab mb24",buttonStyle:"solid",disabled:t,onChange:s,defaultValue:r,value:r},n.map(function(e){return c.a.createElement(ce,{key:e.value,className:"full-width",disabled:e.disable,value:e.value},i(e.label))})))}}]),t}(o.Component),ue=Object(d.d)(de),me=J.a.Group,pe=J.a.Button,fe=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,l=new Array(r),o=0;o<r;o++)l[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(l)))).onChangeActivityMode=function(e){e.preventDefault(),(0,a.props.onChangeActivityMode)(e.target.value)},a.formatMessage=function(e){return a.props.intl.formatMessage(e)},a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.activityMode,a=e.activityType,n=e.data,r=(n=void 0===n?{}:n).mode,i=void 0===r?{}:r,s=this.props.disabledForEdit,l=i[a],d=this.formatMessage,u=this.onChangeActivityMode;return c.a.createElement(o.Fragment,null,c.a.createElement("div",{className:"label-color pb5 fontsize12"},d($.activity)),c.a.createElement(me,{className:"radio-group-tab mb24",buttonStyle:"solid",disabled:s,value:t,onChange:u,defaultValue:t},l.map(function(e){return c.a.createElement(pe,{key:e.value,className:"full-width",value:e.value,disabled:e.disable},d(e.label))})))}}]),t}(o.Component),ve=Object(d.d)(fe),he=a(190),be=a(183),ge=a.n(be),Ee=a(195),Oe=a.n(Ee),ye=c.a.createElement("img",{src:Oe.a,alt:"s",className:"w18 h18"}),Ce=J.a.Group,Ne=J.a.Button,Ae=se.a.Option,Te=se.a.OptGroup,je=z.a.Item,De=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,l=new Array(r),o=0;o<r;o++)l[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(l)))).getParentNode=function(e){return e.parentNode},a.insertUserEntry=function(e){var t=[];return e.forEach(function(e){var a=e.basicInfo,n=a._id,r=a.name,i=a.profilePicLink,s=void 0===i?ge.a:i,l=e.personalInfo,o=l.dob,d=l.gender,u=o&&X()().diff(o,"years",!1);t.push(c.a.createElement(Ae,{key:n,value:n,name:r},c.a.createElement("div",{className:"flex justify-content-start align-items-center iqvia-user-snippet"},c.a.createElement("img",{alt:"user",src:s}),c.a.createElement("div",{className:"deep-sea-blue fontsize12 mr8"},"".concat(r).concat(u?" (".concat(u," ").concat(d,")"):"")))))}),t},a.getParticipantOption=function(){var e=a.props.members,t=void 0===e?[]:e,n=[],r=t.filter(function(e){return e.basicInfo.category===Z.D.DOCTOR}),i=t.filter(function(e){return e.basicInfo.category===Z.D.PATIENT&&e.status===Z.E.ENROLLED}),s=t.filter(function(e){return e.basicInfo.category===Z.D.CARE_COACH});return r.length>0&&n.push(c.a.createElement(Te,{key:"doctor",label:"Doctors (".concat(r.length,")")},a.insertUserEntry(r))),i.length>0&&n.push(c.a.createElement(Te,{key:"patient",label:"Patients (".concat(i.length,")")},a.insertUserEntry(i))),s.length>0&&n.push(c.a.createElement(Te,{key:"careCoach",label:"Carecoaches (".concat(s.length,")")},a.insertUserEntry(s))),n},a.formatMessage=function(e){return a.props.intl.formatMessage(e)},a.onChangeParticpantRadioGroup=function(e){e.preventDefault();var t,n=a.props,r=n.setParticipantTwo,i=n.members,s=void 0===i?[]:i,l=e.target.value,o=a.props.onChangeActivityType;s.forEach(function(e){var a=e.basicInfo,n=(a=void 0===a?{}:a)._id,r=a.category;n===l&&(t=r)}),t===Z.D.DOCTOR&&o({activityMode:Z.a.CHAT,activityType:Z.c.FOLLOWUP}),r(l)},a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.form,a=t.getFieldDecorator,n=t.isFieldTouched,r=t.getFieldError,i=e.currentUser,s=(i=void 0===i?{}:i).basicInfo.category,l=i.programIds,d=void 0===l?[]:l,u=e.fieldName,m=e.participantTwo,p=e.userId,f=e.eventMode,v=e.disabledForEdit,h=e.remindCareCoach,b=e.setParticipantTwo,g=this.getParticipantOption,E=this.formatMessage,O=this.onChangeParticpantRadioGroup,y=n(u)&&r(u),C=d[0]||{},N=C.careCoach,A=C.doctor;return f===Z.m.REMINDER&&s===Z.D.PATIENT?c.a.createElement("div",{className:"flex justify-content-space-between mb24"},c.a.createElement("div",{className:"fontsize14 black"},E($.remindMyCareCoach)),c.a.createElement(he.a,{defaultChecked:!!m,disabled:v,onChange:h})):c.a.createElement(o.Fragment,null,c.a.createElement("div",{ref:this.setref},(Z.D.CARE_COACH===s||Z.D.DOCTOR===s)&&c.a.createElement(je,{label:"".concat(f===Z.m.APPOINTMENT?E($.alongWithLabelAppointment):E($.alongWithLabelReminder)),validateStatus:y?"error":"",help:y||""},a(u,{rules:[{required:!0,message:"Enter particpant"}],initialValue:m||p})(c.a.createElement(se.a,{className:"user-select",disabled:v||void 0!==p,placeholder:E($.alongWithPlaceHolder),showSearch:!0,autoComplete:"off",optionFilterProp:"name",suffixIcon:ye,onChange:b,getPopupContainer:this.getParentNode},g())))),Z.D.PATIENT===s&&c.a.createElement(o.Fragment,null,c.a.createElement("div",{className:"label-color pb5 fontsize12"},E($.alongWithLabelAppointment)),c.a.createElement(je,{style:{marginBottom:"16px"}},a(u,{rules:[{required:!0,message:"Enter particpant"}],initialValue:N||m||p})(c.a.createElement(Ce,{className:"radio-group-tab mb24",buttonStyle:"solid",disabled:v,onChange:O},c.a.createElement(Ne,{key:"careCoach",className:"full-width",value:N},"My Care Coach"),c.a.createElement(Ne,{key:"doctor",className:"full-width",value:A},"My Doctor"))))))}}]),t}(o.Component),Me=Object(d.d)(De),Ie=a(208),we=z.a.Item,Se=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,l=new Array(r),o=0;o<r;o++)l[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(l)))).validateFields=function(){var e=a.props,t=e.form.validateFields,n=e.setRepeatIntervalError;t(function(e,t){if(null!==e){var a=e.repeatInterval;n(void 0!==a)}})},a.validateRepeatInterval=function(e,t,a){var n=Object(Ie.b)(t);t&&!1===n.valid?a("".concat(t," is not valid Repeat Interval.")):t>1e3?a("Repeat Interval cannot be greater than 1000"):a()},a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.validateFields()}},{key:"componentWillUnmount",value:function(){this.validateFields()}},{key:"render",value:function(){var e=this.props,t=e.form,a=t.getFieldDecorator,n=t.getFieldError,r=t.isFieldTouched,i=e.fieldName,s=e.value,l=e.getRepeatTypeStr,o=e.onRepeatIntervalChange,d=e.intl.formatMessage;console.log(i);var u=this.validateRepeatInterval,m=r(i)&&n(i);return c.a.createElement("div",{className:"ml16"},c.a.createElement(we,{className:"flex-1 flex repeat-interval",label:"Repeats Every",validateStatus:m?"error":"",help:m||""},a(i,{rules:[{required:!0,message:d($.repeatIntervalError)},{validator:u}],initialValue:s})(c.a.createElement(le.a,{onBlur:o,className:"full-width repeat-interval",min:1,style:{width:"100%"}})),c.a.createElement("div",{className:"repeat-type"},l())))}}]),t}(o.Component),ke=Object(d.d)(Se),Pe=z.a.Item,Re=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.form.validateFields)()}},{key:"componentWillUnmount",value:function(){(0,this.props.form.validateFields)()}},{key:"render",value:function(){var e=this.props,t=e.form,a=t.getFieldDecorator,n=t.getFieldError,r=t.isFieldTouched,i=e.fieldName,s=e.value,l=e.label,o=e.disabled,d=r(i)&&n(i);return c.a.createElement(Pe,{label:l,style:{marginBottom:"16px"},validateStatus:d?"error":"",help:d||""},a(i,{rules:[{required:!0,message:"Enter reminder title"}],initialValue:s})(c.a.createElement(le.a,{disabled:o})))}}]),t}(o.Component),xe=z.a.Item,Le=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.form.validateFields)()}},{key:"componentWillUnmount",value:function(){(0,this.props.form.validateFields)()}},{key:"render",value:function(){var e=this.props,t=e.form.getFieldDecorator,a=e.fieldName,n=e.value,r=e.label;return c.a.createElement(o.Fragment,null,c.a.createElement(xe,{label:r,style:{display:"none"}},t(a,{rules:[{required:!0}],initialValue:n})(c.a.createElement(le.a,null))))}}]),t}(o.Component),Ue=(L={},Object(re.a)(L,Z.D.CARE_COACH,(k={},Object(re.a)(k,Z.D.PATIENT,{activity:[{value:Z.c.FOLLOWUP,label:$.followup,disable:!1},{value:Z.c.MEDICATION,label:$.medication,disable:!1},{value:Z.c.MATERIAL_DELIVERY,label:$.materialDelivery,disable:!1}],mode:(M={},Object(re.a)(M,Z.c.FOLLOWUP,[{value:Z.a.CALL,label:$.call,disable:!1},{value:Z.a.CHAT,label:$.textEmail,disable:!1},{value:Z.a.VISIT,label:$.visit,disable:!1}]),Object(re.a)(M,Z.c.MATERIAL_DELIVERY,[{value:Z.a.CALL,label:$.call,disable:!0},{value:Z.a.CHAT,label:$.textEmail,disable:!0},{value:Z.a.VISIT,label:$.visit,disable:!1}]),Object(re.a)(M,Z.c.MEDICATION,[{value:Z.a.CALL,label:$.call,disable:!1},{value:Z.a.CHAT,label:$.textEmail,disable:!1},{value:Z.a.VISIT,label:$.visit,disable:!1}]),M)}),Object(re.a)(k,Z.D.DOCTOR,{activity:[{value:Z.c.FOLLOWUP,label:$.followup,disable:!1},{value:Z.c.MEDICATION,label:$.medication,disable:!1},{value:Z.c.MATERIAL_DELIVERY,label:$.materialDelivery,disable:!1}],mode:(I={},Object(re.a)(I,Z.c.FOLLOWUP,[{value:Z.a.CALL,label:$.call,disable:!1},{value:Z.a.CHAT,label:$.textEmail,disable:!1},{value:Z.a.VISIT,label:$.visit,disable:!1}]),Object(re.a)(I,Z.c.MATERIAL_DELIVERY,[{value:Z.a.CALL,label:$.call,disable:!0},{value:Z.a.CHAT,label:$.textEmail,disable:!0},{value:Z.a.VISIT,label:$.visit,disable:!1}]),Object(re.a)(I,Z.c.MEDICATION,[{value:Z.a.CALL,label:$.call,disable:!1},{value:Z.a.CHAT,label:$.textEmail,disable:!1},{value:Z.a.VISIT,label:$.visit,disable:!1}]),I)}),Object(re.a)(k,"DEFAULT",{activity:[{value:Z.c.FOLLOWUP,label:$.followup,disable:!1},{value:Z.c.MEDICATION,label:$.medication,disable:!1},{value:Z.c.MATERIAL_DELIVERY,label:$.materialDelivery,disable:!1}],mode:(w={},Object(re.a)(w,Z.c.FOLLOWUP,[{value:Z.a.CALL,label:$.call,disable:!1},{value:Z.a.CHAT,label:$.textEmail,disable:!1},{value:Z.a.VISIT,label:$.visit,disable:!1}]),Object(re.a)(w,Z.c.MATERIAL_DELIVERY,[{value:Z.a.CALL,label:$.call,disable:!0},{value:Z.a.CHAT,label:$.textEmail,disable:!0},{value:Z.a.VISIT,label:$.visit,disable:!1}]),Object(re.a)(w,Z.c.MEDICATION,[{value:Z.a.CALL,label:$.call,disable:!1},{value:Z.a.CHAT,label:$.textEmail,disable:!1},{value:Z.a.VISIT,label:$.visit,disable:!1}]),w)}),Object(re.a)(k,Z.D.DOCTOR,{activity:[{value:Z.c.FOLLOWUP,label:$.followup,disable:!1},{value:Z.c.MEDICATION,label:$.medication,disable:!1},{value:Z.c.MATERIAL_DELIVERY,label:$.materialDelivery,disable:!1}],mode:(S={},Object(re.a)(S,Z.c.FOLLOWUP,[{value:Z.a.CALL,label:$.call,disable:!1},{value:Z.a.CHAT,label:$.textEmail,disable:!1},{value:Z.a.VISIT,label:$.visit,disable:!1}]),Object(re.a)(S,Z.c.MATERIAL_DELIVERY,[{value:Z.a.CALL,label:$.call,disable:!0},{value:Z.a.CHAT,label:$.textEmail,disable:!0},{value:Z.a.VISIT,label:$.visit,disable:!1}]),Object(re.a)(S,Z.c.MEDICATION,[{value:Z.a.CALL,label:$.call,disable:!1},{value:Z.a.CHAT,label:$.textEmail,disable:!1},{value:Z.a.VISIT,label:$.visit,disable:!1}]),S)}),k)),Object(re.a)(L,Z.D.PATIENT,(x={},Object(re.a)(x,Z.D.DOCTOR,{activity:[{value:Z.c.FOLLOWUP,label:$.followup,disable:!1},{value:Z.c.MEDICATION,label:$.medication,disable:!0},{value:Z.c.MATERIAL_DELIVERY,label:$.materialDelivery,disable:!0}],mode:Object(re.a)({},Z.c.FOLLOWUP,[{value:Z.a.CALL,label:$.call,disable:!0},{value:Z.a.CHAT,label:$.textEmail,disable:!1},{value:Z.a.VISIT,label:$.visit,disable:!0}])}),Object(re.a)(x,Z.D.CARE_COACH,{activity:[{value:Z.c.FOLLOWUP,label:$.followup,disable:!1},{value:Z.c.MEDICATION,label:$.medication,disable:!1},{value:Z.c.MATERIAL_DELIVERY,label:$.materialDelivery,disable:!1}],mode:(P={},Object(re.a)(P,Z.c.FOLLOWUP,[{value:Z.a.CALL,label:$.call,disable:!1},{value:Z.a.CHAT,label:$.textEmail,disable:!1},{value:Z.a.VISIT,label:$.visit,disable:!1}]),Object(re.a)(P,Z.c.MATERIAL_DELIVERY,[{value:Z.a.CALL,label:$.call,disable:!0},{value:Z.a.CHAT,label:$.textEmail,disable:!0},{value:Z.a.VISIT,label:$.visit,disable:!1}]),Object(re.a)(P,Z.c.MEDICATION,[{value:Z.a.CALL,label:$.call,disable:!1},{value:Z.a.CHAT,label:$.textEmail,disable:!1},{value:Z.a.VISIT,label:$.visit,disable:!1}]),P)}),Object(re.a)(x,"DEFAULT",{activity:[{value:Z.c.FOLLOWUP,label:$.followup,disable:!1},{value:Z.c.MATERIAL_DELIVERY,label:$.materialDelivery,disable:!1},{value:Z.c.MEDICATION,label:$.medication,disable:!1}],mode:(R={},Object(re.a)(R,Z.c.FOLLOWUP,[{value:Z.a.CALL,label:$.call,disable:!1},{value:Z.a.CHAT,label:$.textEmail,disable:!1},{value:Z.a.VISIT,label:$.visit,disable:!1}]),Object(re.a)(R,Z.c.MATERIAL_DELIVERY,[{value:Z.a.CALL,label:$.call,disable:!0},{value:Z.a.CHAT,label:$.textEmail,disable:!0},{value:Z.a.VISIT,label:$.visit,disable:!1}]),Object(re.a)(R,Z.c.MEDICATION,[{value:Z.a.CALL,label:$.call,disable:!1},{value:Z.a.CHAT,label:$.textEmail,disable:!1},{value:Z.a.VISIT,label:$.visit,disable:!1}]),R)}),x)),L),Fe=function(e){var t=e.viewer,a=void 0===t?{}:t,n=e.other,r=void 0===n?{}:n,i=e.event,s=void 0===i?{}:i,l=e.edit,o=void 0!==l&&l,c=a.basicInfo,d=(c=void 0===c?{}:c).category,u=r.basicInfo,m=(u=void 0===u?{}:u).category,p=void 0===m?"DEFAULT":m;return o?function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(arguments.length>1&&arguments[1],arguments.length>2&&arguments[2],t.activityType),n=t.activityMode;return{activity:[{value:Z.c.FOLLOWUP,label:$.followup,disable:a!==Z.c.FOLLOWUP},{value:Z.c.MATERIAL_DELIVERY,label:$.materialDelivery,disable:a!==Z.c.MATERIAL_DELIVERY},{value:Z.c.MEDICATION,label:$.medication,disable:a!==Z.c.MEDICATION}],mode:(e={},Object(re.a)(e,Z.c.FOLLOWUP,[{value:Z.a.CALL,label:$.call,disable:n!==Z.a.CALL},{value:Z.a.CHAT,label:$.textEmail,disable:n!==Z.a.CHAT},{value:Z.a.VISIT,label:$.visit,disable:n!==Z.a.VISIT}]),Object(re.a)(e,Z.c.MATERIAL_DELIVERY,[{value:Z.a.CALL,label:$.call,disable:n!==Z.a.CALL},{value:Z.a.CHAT,label:$.textEmail,disable:n!==Z.a.CHAT},{value:Z.a.VISIT,label:$.visit,disable:n!==Z.a.VISIT}]),Object(re.a)(e,Z.c.MEDICATION,[{value:Z.a.CALL,label:$.call,disable:n!==Z.a.CALL},{value:Z.a.CHAT,label:$.textEmail,disable:n!==Z.a.CHAT},{value:Z.a.VISIT,label:$.visit,disable:n!==Z.a.VISIT}]),e)}}(s,d,p):function(e,t){return Ue[e][t]}(d,p)},Ve=a(226),_e=a.n(Ve),Be=a(176),Ye=a.n(Be),ze=a(4),qe=a(5),He=le.a.TextArea,We=c.a.createElement("img",{src:Ye.a,alt:"d",className:"w24 h24"}),Ge=z.a.Item,Qe=J.a.Button,Je=se.a.Option,Ke=ie.a.CheckableTag,Xe="repeatDays",Ze="repeat interval",$e="days",et=function(e){function t(e){var a;Object(n.a)(this,t),(a=Object(i.a)(this,Object(s.a)(t).call(this,e))).getParentNode=function(e){return e.parentNode},a.formatMessage=function(e){return a.props.intl.formatMessage(e)},a.handleConfirmBlur=function(e){var t=e.target.value;a.setState({confirmDirty:a.state.confirmDirty||!!t})},a.handleSubmit=function(e){e.preventDefault();var t=a.props.handleSubmit,n=a.state,r=n.selectedDays,i=n.activityMode,s=n.activityType,l=n.remindCareCoach,o=void 0!==l&&l;a.props.form.validateFields(function(e,a){var n;e||t(Object(q.a)({},a,(n={},Object(re.a)(n,Xe,r),Object(re.a)(n,"activityMode",i),Object(re.a)(n,"activityType",s),Object(re.a)(n,"remindCareCoach",o),n)))})},a.getRepeatOption=function(){return Z.w.map(function(e,t){return c.a.createElement(Je,{key:t,value:e.key},e.label)})},a.getDaysOption=function(){return Z.g.map(function(e){return c.a.createElement(Qe,{key:e,value:e},e)})},a.getTotalTimeDurationOfEvent=function(){var e="",t=a.props,n=t.eventStartTime,r=t.eventEndTime,i=r>n?r.diff(n,"minutes"):0;if(i>0){var s=parseInt(i/60),l=i%60;e=s>0?"Duration ".concat(s," hour ").concat(l>0?"".concat(l," min"):""):"Duration ".concat(l," min")}return e},a.onChangeRepeatType=function(e){var t=a.props,n=t.onChangeRepeatType,r=t.adjustDate;n(e),r()},a.handleCheckDays=function(e,t){var n=a.state.selectedDays,r=t?Object(ne.a)(n).concat([e]):n.filter(function(t){return t!==e});a.setState({selectedDays:r});var i=a.props.form,s=i.setFieldsValue,l=i.validateFields;s(Object(re.a)({},$e,r.join(","))),l()},a.openCalendarStartDate=function(e){e.preventDefault(),window.document.getElementsByClassName("ant-calendar-picker-input")[0].click()},a.openCalendarEndDate=function(e){e.preventDefault(),window.document.getElementsByClassName("ant-calendar-picker-input")[1].click()},a.onChangeActivityType=function(e){a.setState(e)},a.onChangeActivityMode=function(e){a.setState({activityMode:e})},a.validateForm=function(){},a.getParticipantOptionField=function(){},a.disabledStartTime=function(e){},a.disabledEndTime=function(e){},a.validateRepeatInterval=function(e,t,a){var n=Object(Ie.b)(t);t&&!1===n.valid?a(n.msg):a()},a.onRepeatIntervalChange=function(e){e.preventDefault();var t=a.props,n=t.adjustDate,r=t.form.getFieldError;(0,t.setRepeatIntervalError)(void 0!=r(Ze)),n()},a.remindCareCoach=function(e){a.setState({remindCareCoach:e.target.checked})},a.setParticipantTwo=function(e){var t,n=a.state.members,r=void 0===n?[]:n,i=a.props.setParticipantTwo;console.log("members ----",r),r.forEach(function(a){(a||{}).basicInfo._id===e&&(t=a)}),i(t)},a.getActivityConfig=function(){var e=a.props,t=e.purpose,n=e.currentUser,r=e.otherUser,i=e.data;return Fe({viewer:n,other:r,event:i,edit:t})};var r=a.props.data,l=(r=void 0===r?{}:r).activityType,o=r.activityMode,d=r.repeatDays,u=void 0===d?[]:d;return a.state={confirmDirty:!1,autoCompleteResult:[],selectedDays:u||[],activityType:l||Z.c.FOLLOWUP,activityMode:o||Z.a.CALL,members:[]},a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.form.validateFields();var t=this.props.data.repeat;t&&this.onChangeRepeatType(t);var a=this.setParticipantTwo,n=this.props,r=n.currentUser,i=(r=void 0===r?{}:r).basicInfo,s=(i=void 0===i?{}:i).category,l=r.programIds,o=void 0===l?[]:l,c=n.users,d=void 0===c?{}:c,u=n.data,m=(u=void 0===u?{}:u).participantTwo;if(s===Z.D.CARE_COACH||s===Z.D.DOCTOR)Object(ze.a)({url:qe.h.getRelatedMembersURL()}).then(function(t){e.setState({members:t.payload.data.members})}).catch(function(e){});else if(s===Z.D.PATIENT){var p=o[0]||{},f=p.careCoach,v=p.doctor;this.setState({members:[d[f],d[v]]},function(){a(f)}),a()}m&&a(m)}},{key:"render",value:function(){var e=this.props,t=e.data,a=(t=void 0===t?{}:t).participantTwo,n=t.repeatInterval,r=t.notes,i=t.title,s=e.form,l=e.eventMode,d=e.loading,u=e.handleCancel,m=e.eventStartTime,p=e.eventEndTime,f=e.onChangeEventEndTime,v=e.onChangeEventStartTime,h=e.startDate,b=e.endDate,g=e.repeatType,E=e.onEndDateChange,O=e.onStartDateChange,y=e.disabledEndDate,C=e.purpose,N=e.disabledForEdit,A=e.userId,T=e.currentUser,j=e.eventEndTimeError,D=e.eventStartTimeError,M=e.setRepeatIntervalError,I=e.showRepeating,w=e.disabledDateAndTime,S=e.disabledStartDateOnEdit,k=s.getFieldDecorator,P=s.getFieldsError,R=s.getFieldError,x=this.getRepeatOption,L=this.formatMessage,U=this.onChangeRepeatType,F=this.handleCheckDays,V=this.openCalendarStartDate,_=this.openCalendarEndDate,B=this.getTotalTimeDurationOfEvent,Y=this.onChangeActivityMode,q=this.onChangeActivityType,H=this.onRepeatIntervalChange,W=this.remindCareCoach,G=this.setParticipantTwo,Q=this.state,J=Q.members,K=Q.activityType,ne=Q.activityMode,re=B(),ie=this.state.selectedDays,le=this.getActivityConfig();return c.a.createElement(z.a,{className:"event-form",onSubmit:this.handleSubmit},l===Z.m.REMINDER&&c.a.createElement(Re,{fieldName:"title",value:i,form:this.props.form,label:L($.reminderTitle),disabled:N}),c.a.createElement(Me,{eventMode:l,currentUser:T,userId:A,members:J,participantTwo:a,form:s,fieldName:"participantTwo",disabledForEdit:N,remindCareCoach:W,setParticipantTwo:G,onChangeActivityType:q,onChangeActivityMode:Y}),l===Z.m.APPOINTMENT&&c.a.createElement(o.Fragment,null,c.a.createElement(ue,{data:le,onChangeActivityType:q,activityType:K,activityMode:ne}),c.a.createElement(ve,{data:le,onChangeActivityMode:Y,activityMode:ne,activityType:K})),I&&c.a.createElement(o.Fragment,null,c.a.createElement("div",{className:"flex justify-content-space-between"},c.a.createElement(Ge,{className:"flex-1 align-self-end"},k("repeat",{rules:[],initialValue:g||Z.x.NONE,onChange:U})(c.a.createElement(se.a,{className:"full-width",placeholder:"",showSearch:!0,autoComplete:"off",optionFilterProp:"children",suffixIcon:We,filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0},getPopupContainer:this.getParentNode},x()))),g!==Z.x.NONE&&g!==Z.x.DAILY&&c.a.createElement(ke,{fieldName:"repeatInterval",value:n,form:this.props.form,getRepeatTypeStr:function(){switch(g){case Z.x.WEEKLY:return"Weeks";case Z.x.MONTHLY:return"Months";case Z.x.YEARLY:return"Years";default:return""}},onRepeatIntervalChange:H,setRepeatIntervalError:M})),g===Z.x.WEEKLY&&c.a.createElement("div",{className:"mb16"},c.a.createElement("div",{className:"mb8"},c.a.createElement("span",{className:"warning-color"},"* "),c.a.createElement("span",{className:"fontsize12 label-color"},L($.repeatsOn)),c.a.createElement("span",{className:"fontsize12 dark"}," ".concat(ie.join(", "))),ie&&0===ie.length&&c.a.createElement("span",{className:"fontsize12 warning-color ml8"},"select repeating days")),c.a.createElement(Le,{value:ie.join(","),fieldName:$e,form:this.props.form}),c.a.createElement("div",{className:"flex select-days"},Z.g.map(function(e){return c.a.createElement(Ke,{className:"select-days flex-1",key:e,checked:ie.indexOf(e)>-1,onChange:function(t){return F(e,t)}},e)})))),c.a.createElement("div",{className:" full-width flex justify-content-space-between mb24"},c.a.createElement("div",{className:" flex-1 flex  align-items-end iqvia-date-picker"},c.a.createElement("div",{className:"full-width"},c.a.createElement("div",{className:"label-color fontsize12"},g===Z.x.NONE?L($.on):L($.from)),c.a.createElement(ae.a,{format:"DD/MM/YYYY, ddd",showToday:!1,disabled:w||S,className:"full-width",suffixIcon:null,value:null===h?null:X()(h),onChange:O,getCalendarContainer:this.getParentNode})),c.a.createElement("img",{alt:"",className:"calendar",onClick:w?null:V,src:_e.a})),I&&g!==Z.x.NONE&&c.a.createElement("div",{className:"flex-1 flex  align-items-end iqvia-date-picker"},c.a.createElement("div",{className:"full-width ml16"},c.a.createElement("div",{className:"label-color fontsize12"},L($.till)),c.a.createElement(ae.a,{format:"DD/MM/YYYY, ddd",disabled:void 0!==R(Ze),showToday:!1,disabledDate:y,className:"full-width",suffixIcon:null,value:null===b?null:X()(b),onChange:E,getCalendarContainer:this.getParentNode})),c.a.createElement("img",{alt:"",className:"calendar",onClick:_,src:_e.a}))),c.a.createElement(o.Fragment,null,c.a.createElement("div",{className:"flex justify-content-space-between"},c.a.createElement("div",{className:"full-width"},c.a.createElement("div",{className:"label-color fontsize12"},"".concat(l===Z.m.APPOINTMENT?L($.from):L($.at))),c.a.createElement(te.a,{allowClear:!1,disabled:w,className:"".concat(!0===D?"has-error":""),use12Hours:!0,format:"h:mm A",suffixIcon:null,style:{width:"100%"},value:X()(m),onChange:v,getPopupContainer:this.getParentNode})),l===Z.m.APPOINTMENT&&c.a.createElement("div",{className:"full-width ml16"},c.a.createElement("div",{className:"label-color fontsize12"},L($.till)),c.a.createElement(te.a,{className:"".concat(!0===j?"has-error":""),allowClear:!1,disabled:w,use12Hours:!0,format:"h:mm A",style:{width:"100%"},suffixIcon:null,value:X()(p),onChange:f,getPopupContainer:this.getParentNode}))),l===Z.m.APPOINTMENT&&!j&&!D&&c.a.createElement("div",{className:"full-width dark tar mt4"},re),!0===j&&c.a.createElement("div",{className:"full-width warning-color tar mt4 fontsize12"},"End time cannot be less than and equal Start time"),!0===D&&c.a.createElement("div",{className:"full-width warning-color tar mt4 fontsize12"},"You can't create events on passed time.")),c.a.createElement(Ge,{className:"mt16"},k("notes",{rules:[],initialValue:r})(c.a.createElement(He,{placeholder:L($.notes),autosize:!0}))),c.a.createElement("div",{className:"footer"},c.a.createElement("div",{className:"flex align-items-center justify-content-end h100 mr24"},c.a.createElement(ee.a,{className:"iqvia-btn cancel mr16",onClick:u},L($.cancel)),c.a.createElement(Ge,{className:"m0"},c.a.createElement(ee.a,{className:"iqvia-btn",type:"primary",htmlType:"submit",loading:d,disabled:Object(Ie.a)(P())||j||D},C?"Save":l===Z.m.APPOINTMENT?L($.addAppointment):L($.addReminder))))))}}]),t}(o.Component),tt=Object(d.d)(et),at=a(613),nt=a.n(at),rt=(a(619),a(460)),it=a.n(rt),st=a(620),lt=a.n(st),ot=a(621),ct=a.n(ot),dt=c.a.createElement("img",{src:ct.a,alt:"d",className:"w14 h14"}),ut=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,l=new Array(r),o=0;o<r;o++)l[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(l)))).eventResize=function(e,t){var n=e.start,r=e.end;(0,a.props.onEventDurationChange)(n,r)},a.eventResizeStart=function(e){},a.eventResizeStop=function(e){},a.eventDragStart=function(e,t){},a.eventDrop=function(e,t){var n=e.start,r=e.end;(0,a.props.onEventDurationChange)(n,r)},a.eventDragStop=function(e){},a.adjustCurrentEvent=function(){var e=window.document.getElementsByClassName("current");e&&e.length>0&&e[0].scrollIntoView({block:"center"})},a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.adjustCurrentEvent()}},{key:"componentDidUpdate",value:function(e,t){this.adjustCurrentEvent()}},{key:"render",value:function(){var e=this.props,t=e.event,a=e.bookedEvents,n=this.eventDragStart,r=this.eventDragStop,i=this.eventResize,s=this.eventResizeStop,l=this.eventResizeStart,o=this.eventDrop;return c.a.createElement("div",{id:"12717728812718t27182t1"},c.a.createElement(nt.a,{header:{left:"",center:"",right:""},defaultDate:null===t?null:t.start,events:null===t?[]:[t].concat(Object(ne.a)(a)),editable:!0,eventLimit:!0,defaultView:"agendaDay",eventDurationEditable:!0,eventStartEditable:!0,eventDragStart:n,eventDragStop:r,eventDrop:o,eventResize:i,eventResizeStart:l,eventResizeStop:s,timezone:"local"}))}}]),t}(o.Component),mt=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,l=new Array(r),o=0;o<r;o++)l[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(l)))).formatMessage=function(e){return(0,a.props.intl.formatMessage)(e)},a.getParentNode=function(e){return e.parentNode},a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.className,a=e.eventEndTime,n=e.eventStartTime,r=e.onEventDurationChange,i=e.startDate,s=e.onStartDateChange,l=e.disabledStartDate,d=e.disabledStartDateOnEdit,u=e.onPrev,m=e.onNext,p=e.eventMode,f=e.bookedEvents,v=e.participant,h=(v=void 0===v?{}:v).basicInfo,b=(h=void 0===h?{}:h).name,g=h.profilePicLink,E=void 0===g?ge.a:g,O=this.formatMessage,y={start:n,end:a,className:"current"},C=!1;return i&&null!==i&&i.isValid&&(C=X()().isSame(i,"day")),c.a.createElement("div",{className:t},c.a.createElement("div",{className:"mask"}),p===Z.m.APPOINTMENT&&c.a.createElement(o.Fragment,null,c.a.createElement("div",{className:" header fontsize16 dark medium"},O($.chooseWhen)),c.a.createElement("div",{className:"calendar-toolbar mt16 flex justify-content-start align-items-center"},c.a.createElement(o.Fragment,null,c.a.createElement("img",{className:"mr8  ".concat(C||d?"not-allowed":"clickable"," "),src:lt.a,alt:"prev",onClick:C||d?null:u}),c.a.createElement("img",{className:"mr8  ".concat(d?"not-allowed":"clickable"," "),src:it.a,alt:"prev",onClick:d?null:m})),c.a.createElement("div",{className:"mr16"},c.a.createElement(ae.a,{disabledDate:l,disabled:d,allowClear:!1,className:"date-picker",format:"DD/MM/YYYY, ddd",suffixIcon:dt,value:null===i?null:X()(i),onChange:s,getCalendarContainer:this.getParentNode})),c.a.createElement("div",{className:"flex-1 flex justify-content-end align-items-center mr8 ml8"},b&&c.a.createElement("div",{className:"flex justify-content-start align-items-center iqvia-user-snippet bg-transparent"},c.a.createElement("img",{alt:"u",src:E}),c.a.createElement("div",{className:"deep-sea-blue fontsize12 medium mr8"},"".concat(b,"'s Calendar")))))),c.a.createElement(ut,{onEventDurationChange:r,event:p===Z.m.REMINDER?null:y,bookedEvents:f}))}}]),t}(o.Component),pt=Object(d.d)(mt),ft=a(288),vt=a(227),ht=a(58),bt=a(275),gt=J.a.Button,Et=J.a.Group,Ot=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(s.a)(t).call(this,e))).getBookedSlots=Object(G.a)(W.a.mark(function e(){var t,n,r,i,s,l,o,c,d,u,m,p;return W.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.state,n=t.startDate,r=t.participantTwo,i=(r=void 0===r?{}:r).basicInfo,s=(i=void 0===i?{}:i)._id,!(n&&n.isValid&&s)){e.next=11;break}return e.next=8,Object(ze.a)({url:Object(ht.getBookedSlotsURL)(),params:{startDate:n.clone().format("YYYY-MM-DD"),userId:s}});case 8:l=e.sent,o=l.status,c=l.payload,d=void 0===c?{}:c,o&&(u=d.data,m=(u=void 0===u?[]:u).bookedSlots,p=m.map(function(e){return{start:e.start,end:e.end,editable:!1,startEditable:!1,durationEditable:!1,className:"booked"}}),a.setState({bookedEvents:p}));case 11:case"end":return e.stop()}},e,this)})),a.setParticipantTwo=function(e){var t=Object(Q.a)(Object(Q.a)(a)).getBookedSlots;a.setState({participantTwo:e},t)},a.onFormChanges=function(e,t,n){var r=Object(Q.a)(Object(Q.a)(a)).adjustDate,i=t.repeat,s=t.repeatInterval;if(i||s){var l=n.repeat,o=n.repeatInterval;a.setState({repeat:l,repeatInterval:o},r)}},a.getNewEndDate=function(){var e,t=a.state,n=t.repeat,r=t.repeatInterval,i=t.startDate;if(n||r){var s=i.clone(),l=Object(Ie.b)(r);if(n===Z.x.DAILY||!0===l.valid)switch(n){case Z.x.DAILY:e=s.add(1,"d");break;case Z.x.WEEKLY:e=s.add(l.value,"w");break;case Z.x.MONTHLY:e=s.add(l.value,"M");break;case Z.x.YEARLY:e=s.add(l.value,"y")}return e}return e},a.adjustDate=function(){var e=a.state,t=e.repeat,n=e.repeatInterval,r=Object(Q.a)(Object(Q.a)(a)),i=r.onEndDateChange,s=r.getNewEndDate;(t||n)&&i(s())},a.formatMessage=function(e){return(0,a.props.intl.formatMessage)(e)},a.handleCancel=function(){(0,a.props.close)(),a.resetState()},a.resetState=function(){a.setState({eventMode:Z.m.APPOINTMENT,eventTitle:"",eventStartTime:X()(),eventEndTime:X()().add(1,"h"),startDate:X()(),endDate:null,repeatType:Z.x.NONE,participantTwo:{},bookedEvents:[]})},a.onAddAppointment=function(e){var t=a.props.addAppointment,n=e.participantTwo,r=e.activityType,i=e.activityMode,s=e.repeat,l=e.repeatDays,o=e.notes,c=e.repeatInterval,d=a.state,u=d.startDate,m=d.endDate,p=d.eventStartTime,f=d.eventEndTime;t({participantTwo:n,activityMode:i,activityType:r,repeat:s,repeatInterval:c,repeatDays:l,notes:o,startDate:u&&null!==u?u.format():u,endDate:m&&null!==m?m.format():m,startTime:p&&null!==p?p.startOf("minute").format():p,endTime:f&&null!==f?f.startOf("minute").format():f}).then(function(e){void 0!==e&&e.status&&a.resetState()})},a.editNotes=function(e){var t=a.props,n=t.editNotes,r=t.event,i=r.id,s=r.eventType,l=t.editNotesReminder,o=e.notes;s===Z.m.APPOINTMENT?n({id:i,notes:o}).then(function(e){a.resetState()}):s===Z.m.REMINDER&&l({id:i,notes:o}).then(function(e){a.resetState()})},a.reschedule=function(e){var t=a.props,n=t.reschedule,r=t.event.id,i=t.series,s=e.repeat,l=e.repeatDays,o=e.repeatInterval,c=e.notes,d=a.state,u=d.startDate,m=d.endDate,p=d.eventStartTime,f=d.eventEndTime;n({id:r,startDate:u,endDate:m,startTime:p.startOf("minute").format(),endTime:f&&null!==f?f.startOf("minute").format():f,repeat:s,repeatDays:l,repeatInterval:o,series:i,notes:c}).then(function(e){void 0!==e&&e.status&&a.resetState()})},a.editReminder=function(e){var t=a.props,n=t.editReminder,r=t.event.id,i=t.series,s=a.state,l=s.startDate,o=s.endDate,c=s.eventStartTime,d=s.eventEndTime,u=e.notes,m=void 0===u?"":u,p=e.repeat,f=e.repeatDays,v=e.repeatInterval;n({id:r,startDate:l,endDate:o,startTime:c.startOf("minute").format(),endTime:d,repeat:p,repeatDays:f,repeatInterval:v,series:i,notes:m}).then(function(e){void 0!==e&&e.status&&a.resetState()})},a.onAddReminder=function(e){var t,n=a.props,r=n.addReminder,i=n.currentUser.programIds,s=a.state,l=s.startDate,o=s.endDate,c=s.eventStartTime,d=e.repeat,u=e.repeatDays,m=e.notes,p=e.repeatInterval,f=e.title,v=e.remindCareCoach,h=e.participantTwo;v&&(t=(i[0]||{}).careCoach);h&&(t=h),r({startDate:l&&null!==l?l.format():l,endDate:o&&null!==o?o.format():o,startTime:c&&null!==c?c.startOf("minute").format():c,participantTwo:t,repeat:d,repeatInterval:p,repeatDays:u,notes:m,title:f}).then(function(e){a.resetState()})},a.onChangeContext=function(e){a.setState({eventMode:e.target.value})},a.onEventDurationChange=function(e,t){var n={eventStartTime:e,eventEndTime:t,eventStartTimeError:!1};e<=X()()&&(n=Object(q.a)({},n,{eventStartTimeError:!0})),a.setState(n)},a.onChangeEventEndTime=function(e){var t={eventEndTime:e,eventEndTimeError:!1};a.state.eventStartTime>=e&&(t=Object(q.a)({},t,{eventEndTimeError:!0})),a.setState(t)},a.onChangeEventStartTime=function(e){var t=e.clone(),n={eventStartTime:e,eventEndTime:t.add(1,"h"),eventStartTimeError:!1,eventEndTimeError:!1};e<=X()()&&(n=Object(q.a)({},n,{eventStartTimeError:!0})),a.setState(n)},a.onChangeRepeatType=function(e){a.setState({repeatType:e},a.adjustDate)},a.onEndDateChange=function(e){e&&e.isValid&&a.setState({endDate:e})},a.adjustEventOnStartDateChange=function(e,t){var n=a.state,r=n.eventStartTime,i=n.eventEndTime,s=t.clone().startOf("day"),l=e.clone().startOf("day"),o=s.diff(l,"days"),c={eventStartTime:o>0?r.add(o,"days"):r.subtract(Math.abs(o),"days"),eventEndTime:o>0?i.add(o,"days"):i.subtract(Math.abs(o),"days"),eventStartTimeError:!1};r<=X()()&&(c=Object(q.a)({},c,{eventStartTimeError:!0})),a.setState(c)},a.onStartDateChange=function(e){var t=a.state.startDate,n=Object(Q.a)(Object(Q.a)(a)),r=n.adjustDate,i=n.getBookedSlots;e&&e.isValid&&a.setState({startDate:e},function(){a.adjustEventOnStartDateChange(t,e),r(),i()})},a.disabledStartDate=function(e){return e&&e<=X()().subtract({day:1})},a.disabledEndDate=function(e){var t=a.state.repeat;if(t&&t!==Z.x.NONE){var n=a.getNewEndDate();if(n)return e&&e<n}},a.onPrev=function(){var e=a.state.startDate;null!==e&&(0,Object(Q.a)(Object(Q.a)(a)).onStartDateChange)(e.clone().subtract(1,"days"))},a.onNext=function(){var e=a.state.startDate;null!==e&&(0,Object(Q.a)(Object(Q.a)(a)).onStartDateChange)(e.clone().add(1,"days"))},a.getSubmitHandler=function(){var e=a.props,t=e.purpose,n=e.event,r=(void 0===n?{}:n).eventType,i=void 0===r?"":r,s=Object(Q.a)(Object(Q.a)(a)),l=s.editNotes,o=s.reschedule,c=s.onAddAppointment,d=s.onAddReminder,u=s.editReminder,m=a.state.eventMode;return t?i===Z.m.APPOINTMENT?t===Z.l.EDIT_NOTES?l:o:i===Z.m.REMINDER?t===Z.l.EDIT_NOTES?l:u:void 0:m===Z.m.APPOINTMENT?c:d},a.setFormRef=function(e){a.formRef=e,a.setState({formRef:!0})},a.setRepeatIntervalError=function(e){a.setState({repeatInterValError:e})},a.AddForm=z.a.create({onValuesChange:a.onFormChanges})(tt),a.state={eventMode:a.props.eventMode||Z.m.APPOINTMENT,eventTitle:"",eventStartTime:X()(),eventEndTime:X()().add(1,"h"),startDate:X()(),endDate:null,repeatType:Z.x.NONE,bookedEvents:[]},a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidUpdate",value:function(e,t){var a=Object(ft.a)(this.props);if(!0===a.show&&a.show!==e.show){this.setState({eventStartTime:X()(),eventEndTime:X()().add(1,"h"),startDate:X()()});var n=a.userId,r=a.users;if(n){var i=r[n]||{};this.setParticipantTwo(i)}}if(a.show&&!Object(vt.a)(e.event,a.event)){var s=a.event,l=a.currentUser,o=(l=void 0===l?{}:l).basicInfo,c=(o=void 0===o?{}:o)._id,d=a.users,u=void 0===d?{}:d;if(s){var m=s.eventType,p=s.startTime,f=s.endTime,v=s.data,h=(v=void 0===v?{}:v).repeatInterval,b=v.repeat,g=v.participantTwo,E=v.participantOne;this.setState({eventMode:m,eventStartTime:X()(p),eventEndTime:X()(f),startDate:X()(p),repeatInterval:h,repeat:b});var O=g===c?E:g;if(O){var y=u[O]||{};this.setParticipantTwo(y)}}}}},{key:"render",value:function(){var e=this.props,t=e.show,a=e.isError,n=e.requesting,r=e.purpose,i=e.series,s=e.showRepeating,l=e.disabledDateAndTime,o=e.disabledStartDate,d=void 0!==o&&o,u=e.userId,m=e.event,p=(m=void 0===m?{}:m).data,f=void 0===p?{}:p,v=e.currentUser,h=void 0===v?{}:v,b=e.users,g=e.error,E=(g=void 0===g?{}:g).error,O=e.clearMsg,y=h.basicInfo,C=(y=void 0===y?{}:y)._id,N=this.formatMessage,A=this.handleCancel,T=this.AddForm,j=this.onChangeContext,D=this.onEventDurationChange,M=this.onChangeEventEndTime,I=this.onChangeEventStartTime,w=this.onChangeRepeatType,S=this.onEndDateChange,k=this.onStartDateChange,P=this.disabledEndDate,R=this.disabledStartDate,x=this.onPrev,L=this.onNext,U=this.getSubmitHandler,F=this.adjustDate,V=this.setRepeatIntervalError,_=this.setParticipantTwo,B=Object(q.a)({},f),z=f.participantTwo,H=f.participantOne;z===C&&(B=Object(q.a)({},B,{participantTwo:H}));var W=this.state,G=W.eventMode,Q=W.eventTitle,J=W.eventStartTime,K=W.eventEndTime,X=W.startDate,ee=W.endDate,te=W.repeatType,ae=W.eventEndTimeError,ne=W.repeatInterValError,re=W.eventStartTimeError,ie=W.bookedEvents,se=void 0===ie?[]:ie,le=W.participantTwo,oe={visible:t||a,title:r===Z.l.EDIT_NOTES?"Edit Notes":r===Z.l.RESCHEDULE?"Reschedule":N($.schedule),okButtonProps:{},onCancel:A,wrapClassName:"global-modal event-modal",destroyOnClose:!0,footer:null,width:"94%"},ce=!!r;return c.a.createElement(Y.a,oe,E&&c.a.createElement(bt.a,{close:O,msg:E,className:"error"}),c.a.createElement("div",{className:"flex"},c.a.createElement("div",{style:{width:"50%",minHeight:"640px"}},c.a.createElement("div",{className:"flex justify-content-end mb16"},c.a.createElement(Et,{className:"event-group-btn",buttonStyle:"solid",onChange:j,defaultValue:G,disabled:ce,value:G},c.a.createElement(gt,{value:Z.m.APPOINTMENT},N($.appointment)),c.a.createElement(gt,{value:Z.m.REMINDER},N($.reminder)))),c.a.createElement(T,{adjustDate:F,eventMode:G,repeatType:te,onChangeRepeatType:w,disabledEndDate:P,disabledStartDate:R,disabledStartDateOnEdit:d,startDate:X,endDate:ee,onStartDateChange:k,onEndDateChange:S,eventTitle:Q,eventStartTime:J,eventEndTime:K,loading:n,handleCancel:A,onChangeEventEndTime:M,onChangeEventStartTime:I,handleSubmit:U(),purpose:r,showRepeating:s,disabledDateAndTime:l,series:i,disabledForEdit:ce,userId:u,data:B,currentUser:h,otherUser:le,users:b,eventEndTimeError:ae,eventStartTimeError:re,setRepeatIntervalError:V,setParticipantTwo:_})),c.a.createElement(pt,{eventMode:G,range:te!==Z.x.NONE,disabled:G===Z.m.REMINDER||r===Z.l.EDIT_NOTES,eventTitle:Q,disabledEndDate:P,disabledStartDate:R,disabledStartDateOnEdit:d,onStartDateChange:k,onEndDateChange:S,eventStartTime:J,eventEndTime:K,startDate:X,endDate:ee,onPrev:x,onNext:L,repeatInterValError:ne,onEventDurationChange:D,bookedEvents:se,className:"calendar-section ".concat(G===Z.m.REMINDER||r===Z.l.EDIT_NOTES?"disabled":""),participant:le})))}}]),t}(o.Component),yt=Object(d.d)(Ot),Ct=a(19),Nt=a(8),At=a(175),Tt=Object(T.b)(function(e){var t=e.modal,a=t.show,n=t.modalType,r=t.requesting,i=t.purpose,s=t.entityId,l=t.data,o=(l=void 0===l?{}:l).userId,c=l.series,d=void 0!==c&&c,u=t.error,m=e.events.events,p=void 0===m?{}:m,f=e.users,v=e.auth,h=Object(At.c)();return{show:a&&n===Z.n.EVENT_MODAL,requesting:r,purpose:i,event:p[s],userId:o,currentUser:h(f,v.authenticated_user),users:f,showRepeating:!i||d,series:d,disabledDateAndTime:i===Z.l.EDIT_NOTES,disabledStartDate:(i===Z.l.RESCHEDULE||i===Z.l.EDIT_REMINDER)&&d,error:u}},function(e){return{open:function(t){return e(Object(Ct.i)(t))},close:function(){return e(Object(Ct.g)())},addAppointment:function(t){return e(Object(Ct.d)(t))},addReminder:function(t){return e(Object(Ct.e)(t))},reschedule:function(t){return e(Object(Nt.z)(t))},editNotes:function(t){return e(Object(Nt.r)(t))},editReminder:function(t){return e(Object(Nt.t)(t))},editNotesReminder:function(t){return e(Object(Nt.s)(t))},clearMsg:function(){return e(Object(Ct.f)())}}})(yt),jt=Object(d.c)({discharge:{id:"app.modal.discharge",defaultMessage:"Discharge patient(s) from the program"},cancel:{id:"app.modal.cancel",defaultMessage:"Go Back"},content:{id:"app.modal.content",defaultMessage:"Please note that the patients you have selected will be discharged from the program."},message:{id:"app.modal.message",defaultMessage:"Do you still want to discharge?"},alert:{id:"app.modal.alert",defaultMessage:"This action cannot be undone. For help, contact program admin"},dischargeButton:{id:"app.modal.dischargeButton",defaultMessage:"Discharge"}}),Dt=a(302),Mt=a.n(Dt),It=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,l=new Array(r),o=0;o<r;o++)l[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(l)))).handleCancel=function(e){e&&e.preventDefault(),(0,a.props.close)()},a.handleDischarge=function(e){e.preventDefault();var t=a.props,n=t.patientId;(0,t.dischargePatient)(n)},a.formatMessage=function(e){return a.props.intl.formatMessage(e)},a.footer=function(){var e=a.props.requesting,t=Object(Q.a)(Object(Q.a)(a)),n=t.formatMessage,r=t.handleCancel,i=t.handleDischarge;return c.a.createElement("div",{className:"flex align-items-center justify-content-end h72px mr24"},c.a.createElement(ee.a,{className:"iqvia-btn cancel mr8",onClick:r},n(jt.cancel)),c.a.createElement(ee.a,{className:"iqvia-btn warning",type:"primary",loading:e,onClick:i},n(jt.dischargeButton)))},a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.show,a=e.isError,n=e.intl.formatMessage,r=this.handleCancel,i=this.footer,s={visible:t||a,title:n(jt.discharge),okButtonProps:{},onCancel:r,wrapClassName:"global-modal full-height",destroyOnClose:!0,bodyStyle:{height:"100%"},width:"480px",footer:i()};return c.a.createElement(Y.a,s,c.a.createElement("div",{className:"black fontsize16 pl48 pr24 mt8"},n(jt.content)),c.a.createElement("div",{className:"black fontsize16 pl48 pr24 mt16"},n(jt.message)),c.a.createElement("div",{className:"flex align-items-center alert w100 pl24"},c.a.createElement("img",{alt:"alert",src:Mt.a,className:"mr16"}),c.a.createElement("div",{className:"steel-grey fontsize12"},n(jt.alert))))}}]),t}(o.Component),wt=Object(d.d)(It),St=a(10),kt=Object(T.b)(function(e){var t=e.modal;return{show:t.show&&t.modalType===Z.n.DISCHARGE_PATIENT,requesting:t.requesting,patientId:t.entityId}},function(e){return{close:function(){return e(Object(Ct.g)())},dischargePatient:function(t){return e(Object(St.n)(t))}}})(wt),Pt=a(214),Rt=a(427),xt=a(212),Lt=Object(d.c)({close:{id:"app.historical-clinical-reading.close",defaultMessage:"Close"},download_csv:{id:"app.historical-clinical-reading.download_csv",defaultMessage:"Download CSV"},historical_clinical_reading:{id:"app.historical-clinical-reading.historical_clinical_reading",defaultMessage:"Historical Clinical Reading"}}),Ut=a(276).Parser,Ft=a(277),Vt=a(46),_t=function(e){var t=e.updatedAt,a=e.data,n=Vt(t).format("L"),r=Vt(t).format("LT"),i={date:"".concat(n,", ").concat(r)};return Object(xt.a)(a,function(e,t){Object(xt.a)(e,function(e,a){Object.assign(i,Object(re.a)({},"".concat(t,".").concat(a),e))})}),i},Bt=function(e){var t={date:" "},a={date:"Date & Time"};return Object(xt.a)(e,function(e,n){var r=e.label;if(e.content){var i=e.content.suffix;Object(xt.a)(e.content,function(e,s){"suffix"!==s&&(Object.assign(a,Object(re.a)({},"".concat(n,".").concat(s),"".concat(r," ").concat(e))),Object.assign(t,Object(re.a)({},"".concat(n,".").concat(s),i)))})}else Object.assign(a,Object(re.a)({},"".concat(n),"".concat(r))),Object.assign(t,Object(re.a)({},"".concat(n),"".concat(e.suffix)))}),{suffixRow:t,headerRow:a}},Yt=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(s.a)(t).call(this,e))).formatMessage=function(e){return a.props.intl.formatMessage(e)},a.handleCancel=function(e){e&&e.preventDefault(),(0,a.props.close)()},a.handleDownloadAsCSV=function(e){e.preventDefault();var t=a.state,n=t.clinicalData[t.activeKey],r=n.dataSource,i=n.columns.map(function(e){return e.title}),s=new Ut({fields:i}).parse(),l=new Ut({header:!1}).parse(r);Ft(s+"\n"+l,"".concat(a.props.patientId,"_clinical_readings.csv"))},a.footer=function(){var e=a.props.requesting,t=Object(Q.a)(Object(Q.a)(a)),n=t.formatMessage,r=t.handleCancel,i=t.handleDownloadAsCSV;return c.a.createElement("div",{className:"flex align-items-center justify-content-end h72px mr24"},c.a.createElement(ee.a,{className:"iqvia-btn cancel mr8",onClick:r},n(Lt.close)),c.a.createElement(ee.a,{className:"iqvia-btn",type:"primary",loading:e,onClick:i},n(Lt.download_csv)))},a.getDataAndHeader=function(e){return Object.keys(e).map(function(t){var n=Bt(a.state.testTemplates[t].content),r=n.suffixRow,i=n.headerRow,s=Object(ne.a)(e[t]).reverse().map(function(e){return _t(e)});s.unshift(r);var l=[];return Object(xt.a)(i,function(e,t){l.push({title:e,key:t,dataIndex:t})}),{testName:t,dataSource:s,columns:l}})},a.onActiveKeyChange=function(e){a.setState({activeKey:e})},a.state={clinicalReadingsAndTemplates:null,clinicalData:null,activeKey:"0",testTemplates:{}},a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidUpdate",value:function(){var e=this,t=this.state,a=t.clinicalReadingsAndTemplates,n=t.clinicalData;if(this.props.show&&!a){var r=qe.h.getHistoricalClinicalReadingURL(this.props.patientId);this.setState({clinicalReadingsAndTemplates:Object(ze.a)({method:Z.y.GET,url:r})})}else this.props.show&&!n&&Promise.resolve(a)===a?a.then(function(t){e.setState({testTemplates:t.payload.data.clinicalTestTemplates});var a=e.getDataAndHeader(t.payload.data.clinicalReadings);e.setState({clinicalData:a})}):!this.props.show&&n&&this.setState({clinicalReadingsAndTemplates:null,clinicalData:null,testTemplates:{}})}},{key:"render",value:function(){var e=this.props,t=e.show,a=e.isError,n=e.intl.formatMessage,r=this.state.clinicalData,i=this.handleCancel,s=this.footer,l={visible:t||a,title:n(Lt.historical_clinical_reading),okButtonProps:{},onCancel:i,wrapClassName:"global-modal full-height",destroyOnClose:!0,bodyStyle:{height:"100%"},width:"100%",footer:s()};if(!t)return null;if(!r)return c.a.createElement("div",null,"Loader");var o=Object.keys(r);return c.a.createElement(Y.a,l,c.a.createElement("div",{className:"pl40 pr40"},c.a.createElement(Pt.a,{activeKey:this.state.activeKey,onChange:this.onActiveKeyChange},o.map(function(e,t){var a=r[e],n=a.dataSource,i=a.columns,s=a.testName;return c.a.createElement(Pt.a.TabPane,{className:"test-tabs",tab:s,key:t.toString()},c.a.createElement(Rt.a,{size:"small",className:"history-table",dataSource:n,columns:i}))}))))}}]),t}(o.Component),zt=Object(d.d)(Yt),qt=Object(T.b)(function(e){var t=e.modal;return{show:t.show&&t.modalType===Z.n.HISTORICAL_CLINICAL_READING,requesting:t.requesting,patientId:t.entityId}},function(e){return{close:function(){return e(Object(Ct.g)())}}})(zt),Ht=Object(d.c)({close:{id:"app.historical-vitals-reading.close",defaultMessage:"Close"},download_csv:{id:"app.historical-vitals-reading.download_csv",defaultMessage:"Download CSV"},historical_vitals_reading:{id:"app.historical-vitals-reading.historical_vitals_reading",defaultMessage:"Historical Vitals Reading"}}),Wt=a(276).Parser,Gt=a(277),Qt=a(46),Jt=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(s.a)(t).call(this,e))).parseVitals=function(e){var t=e.map(function(e){var t,a,n=e.temperatureUnit,r=e.temperature,i=e.respirationRate,s=e.pulse,l=e.bloodPressure,o=e.updatedAt;n===Z.G.TEMPERATURE_UNIT_C&&(a=Math.round(1.8*r+32),t=r),n===Z.G.TEMPERATURE_UNIT_F&&(a=r,t=Math.round(5/9*(r-32)));var c=t&&a?"".concat(t,"/").concat(a):void 0;return{updatedAt:o?Qt(o).format("DD-MM-YYYY"):"",temperature:c,respirationRate:i,pulse:s,bloodPressure:l}});(t=t.reverse()).unshift({updatedAt:"",temperature:"\u2103/\u2109",respirationRate:"breathe per minute",pulse:"bpm",bloodPressure:"systolic/diastolic in mmHg"});var a=[];return Object(xt.a)({updatedAt:"Updated At",temperature:"Temperature",respirationRate:"Respiration Rate",pulse:"Pulse",bloodPressure:"Blood Pressure"},function(e,t){a.push({title:e,key:t,dataIndex:t})}),{dataSource:t=t.filter(function(e){var t=e.temperature,a=e.respirationRate,n=e.pulse,r=e.bloodPressure;return t&&a&&n&&r}),columns:a}},a.formatMessage=function(e){return a.props.intl.formatMessage(e)},a.handleCancel=function(e){e&&e.preventDefault(),(0,a.props.close)()},a.handleDownloadAsCSV=function(e){e.preventDefault();var t=a.state.vitals,n=t.dataSource,r=t.columns.map(function(e){return e.title}),i=new Wt({fields:r}).parse(),s=new Wt({header:!1}).parse(n);Gt(i+"\n"+s,"".concat(a.props.patientId,"_vitals.csv"))},a.footer=function(){var e=a.props.requesting,t=Object(Q.a)(Object(Q.a)(a)),n=t.formatMessage,r=t.handleCancel,i=t.handleDownloadAsCSV;return c.a.createElement("div",{className:"flex align-items-center justify-content-end h72px mr24"},c.a.createElement(ee.a,{className:"iqvia-btn cancel mr8",onClick:r},n(Ht.close)),c.a.createElement(ee.a,{className:"iqvia-btn",type:"primary",loading:e,onClick:i},n(Ht.download_csv)))},a.state={vitalsPromise:null,vitals:null},a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidUpdate",value:function(e,t){var a=this,n=this.state,r=n.vitals,i=n.vitalsPromise,s=Object(ft.a)(this.props);if(!this.props.show||i||Object(vt.a)(s,e))this.props.show&&!r&&Promise.resolve(i)===i?i.then(function(e){var t=a.parseVitals(e.payload.data.vitals);a.setState({vitals:t})}):!this.props.show&&r&&this.setState({vitalsPromise:null,vitals:null});else{var l=qe.h.getHistoricalVitalsReadingURL(this.props.patientId);this.setState({vitalsPromise:Object(ze.a)({method:Z.y.GET,url:l})})}}},{key:"render",value:function(){var e=this.props,t=e.show,a=e.isError,n=e.intl.formatMessage,r=this.state.vitals,i=this.handleCancel,s=this.footer,l={visible:t||a,title:n(Ht.historical_vitals_reading),okButtonProps:{},onCancel:i,wrapClassName:"global-modal full-height",destroyOnClose:!0,bodyStyle:{height:"100%"},width:"700px",footer:s()};if(!t)return null;if(!r)return c.a.createElement("div",null,"Loader");var o=r.dataSource,d=r.columns;return c.a.createElement(Y.a,l,c.a.createElement("div",{className:"pl40 pr40"},c.a.createElement(Rt.a,{size:"small",className:"history-table vitals-history-table",dataSource:o,columns:d})))}}]),t}(o.Component),Kt=Object(d.d)(Jt),Xt=Object(T.b)(function(e){var t=e.modal;return{show:t.show&&t.modalType===Z.n.HISTORICAL_VITALS_READING,requesting:t.requesting,patientId:t.entityId}},function(e){return{close:function(){return e(Object(Ct.g)())}}})(Kt),Zt=Object(d.c)({close:{id:"app.historical-medication-data.close",defaultMessage:"Close"},download_csv:{id:"app.historical-medication-data.download_csv",defaultMessage:"Download CSV"},historical_medication_data:{id:"app.historical-medication-data.historical_medication_data",defaultMessage:"Historical Medication Data"}}),$t=a(276).Parser,ea=a(277),ta=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(s.a)(t).call(this,e))).parseMedication=function(e){var t=e.map(function(e){var t=1,a={};return Object(xt.a)(e,function(e,n){"updatedAt"!==n&&(Object.assign(a,Object(re.a)({},"med".concat(t),e)),t+=1)}),Object.assign(a,{updatedAt:e.updatedAt}),a});return t=t.filter(function(e){return Object.keys(e).length>1})},a.formatMessage=function(e){return a.props.intl.formatMessage(e)},a.handleCancel=function(e){e&&e.preventDefault(),(0,a.props.close)()},a.handleDownloadAsCSV=function(e){e.preventDefault();for(var t=a.state.medication,n=t.map(function(e){return Object.keys(e).length}),r=Math.max.apply(Math,Object(ne.a)(n)),i=["UpdatedAt"],s=1;s<r;s++)i=i.concat(["Product","Often","Upto"]);var l=t.map(function(e){var t={updatedAt:e.updatedAt};return Object(xt.a)(e,function(e,a){"updatedAt"!==a&&Object(xt.a)(e,function(e,n){Object.assign(t,Object(re.a)({},"".concat(a,".").concat(n),e))})}),t}),o=new $t({fields:i}).parse(),c=new $t({header:!1}).parse(l);ea(o+"\n"+c,"".concat(a.props.patientId,"_medication.csv"))},a.footer=function(){var e=a.props.requesting,t=Object(Q.a)(Object(Q.a)(a)),n=t.formatMessage,r=t.handleCancel,i=t.handleDownloadAsCSV;return c.a.createElement("div",{className:"flex align-items-center justify-content-end h72px mr24"},c.a.createElement(ee.a,{className:"iqvia-btn cancel mr8",onClick:r},n(Zt.close)),a.state.noData?c.a.createElement(ee.a,{className:"iqvia-btn",type:"primary",disabled:!0,loading:e,onClick:i},n(Zt.download_csv)):c.a.createElement(ee.a,{className:"iqvia-btn",type:"primary",loading:e,onClick:i},n(Zt.download_csv)))},a.cols=function(e){for(var t=[{title:"Updated At",key:"updatedAt",dataIndex:"updatedAt",width:70}],a=1;a<e;a++)t.push({title:"Medicine ".concat(a),key:"medicine".concat(a),children:[{title:"Product",width:1===e?110:80,dataIndex:"med".concat(a,".name")},{title:"Often",width:1===e?110:80,dataIndex:"med".concat(a,".often")},{title:"Upto",width:1===e?110:80,dataIndex:"med".concat(a,".upto")}]});return t},a.state={medicationPromise:null,medication:null,noData:!1},a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidUpdate",value:function(){var e=this,t=this.state,a=t.medication,n=t.medicationPromise,r=t.noData;if(this.props.show&&!n){var i=qe.h.getHistoricalMedicationDataURL(this.props.patientId);this.setState({medicationPromise:Object(ze.a)({method:Z.y.GET,url:i})})}else!this.props.show||a||r||Promise.resolve(n)!==n?!this.props.show&&a&&this.setState({medicationPromise:null,medication:null,noData:!1}):n.then(function(t){if("No Medication"!==t.payload.message){var a=e.parseMedication(t.payload.data.medications);e.setState({medication:a.reverse()})}else e.setState({noData:!0})})}},{key:"render",value:function(){var e=this.props,t=e.show,a=e.isError,n=e.intl.formatMessage,r=this.state,i=r.medication,s=r.noData,l=this.handleCancel,o=this.footer,d={visible:t||a,title:n(Zt.historical_medication_data),okButtonProps:{},onCancel:l,wrapClassName:"global-modal full-height",destroyOnClose:!0,bodyStyle:{height:"100%"},width:"100%",footer:o()};if(!t)return null;if(s)return c.a.createElement(Y.a,d,c.a.createElement("div",{className:"pl40 pr40"},"Nothing to show"));if(!i)return c.a.createElement("div",null,"Loader");var u=i,m=u.map(function(e){return Object.keys(e).length}),p=Math.max.apply(Math,Object(ne.a)(m)),f=this.cols(p);return c.a.createElement(Y.a,d,c.a.createElement("div",{className:"pl40 pr40"},c.a.createElement(Rt.a,{size:"small",bordered:!0,scroll:{x:330*p},className:"medication-table",dataSource:u,columns:f})))}}]),t}(o.Component),aa=Object(d.d)(ta),na=Object(T.b)(function(e){var t=e.modal;return{show:t.show&&t.modalType===Z.n.HISTORICAL_MEDICATION_DATA,requesting:t.requesting,patientId:t.entityId}},function(e){return{close:function(){return e(Object(Ct.g)())}}})(aa),ra=a(560),ia=a(564),sa=le.a.TextArea,la=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(s.a)(t).call(this,e))).formatMessage=function(e){return a.props.intl.formatMessage(e)},a.handleOnTextChange=function(e){a.setState({reasonForCancel:e.target.value})},a.handleOk=function(e){var t=a.props,n=t.eventDetails,r=n.id,i=n.eventType,s=t.cancelAppointment,l=t.cancelReminder,o=a.state.reasonForCancel;i===Z.m.APPOINTMENT?s(r,!0,{reason:o}):i===Z.m.REMINDER&&l(r,!0)},a.handleCancelAll=function(){console.log("this.props ----",a.props);var e=a.props,t=e.eventDetails,n=t.id,r=t.eventType,i=e.cancelAppointment,s=e.cancelReminder;r===Z.m.APPOINTMENT?i(n,!1):r===Z.m.REMINDER&&s(n,!1)},a.handleCancel=function(){(0,a.props.close)()},a.footer=function(){var e=Object(Q.a)(Object(Q.a)(a)),t=e.formatMessage,n=e.handleCancelAll,r=e.handleOk,i=e.handleCancel,s=a.props.eventDetails,l=(s=void 0===s?{}:s).eventType,o=s.data,d=(o=void 0===o?{}:o).repeat;return c.a.createElement("div",{className:"flex align-items-center justify-content-space-between"},c.a.createElement(ee.a,{className:"iqvia-btn cancel ml8 mr8",onClick:i},t($.goback)),c.a.createElement("div",{className:"flex align-items-center justify-content-end h72px mr24"},d!==Z.x.NONE&&c.a.createElement(ee.a,{className:"iqvia-btn warning-all-button mr8",onClick:n},t($.buttonCancelAll)),c.a.createElement(ee.a,{className:"iqvia-btn warning",type:"primary",loading:a.props.requesting,onClick:r},t(d===Z.x.NONE?l===Z.m.APPOINTMENT?$.cancelAppointment:$.cancelReminder:$.buttonCancelThisOnly))))},a.state={reasonForCancel:""},a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.formatMessage,t=this.handleCancel,a=this.footer,n=this.handleOnTextChange,r=this.props,i=r.show,s=r.currentUserId,l=r.eventDetails,o=(l=void 0===l?{}:l).eventType,d=l.id,u={visible:i,title:"".concat(o===Z.m.APPOINTMENT?e($.cancelAppointment):e($.cancelReminder)),okButtonProps:{},onCancel:t,wrapClassName:"global-modal full-height",destroyOnClose:!0,bodyStyle:{height:"100%"},width:"480px",footer:a()};return c.a.createElement(Y.a,u,c.a.createElement("div",{className:"black fontsize16 pl48 pr24 mt8"},"".concat(o===Z.m.APPOINTMENT?e($.contentAppt):e($.contentRem))),c.a.createElement("div",{className:"black fontsize16 pl48 pr24 mt16"},"".concat(o===Z.m.APPOINTMENT?e($.messageAppt):e($.messageRem))),c.a.createElement("div",{className:" pl48 pr24 mt16"},o===Z.m.APPOINTMENT&&c.a.createElement(sa,{placeholder:e($.reason),onChange:n})),c.a.createElement("div",{className:"black fontsize16 pl48 pr24 mt16"},o===Z.m.APPOINTMENT&&c.a.createElement(ra.a,{id:d,calendarUserId:s,hideAction:!0,modal:!0}),o===Z.m.REMINDER&&c.a.createElement(ia.a,{id:d,calendarUserId:s,hideAction:!0,modal:!0})),c.a.createElement("div",{className:"flex align-items-center alert w100 pl24"},c.a.createElement("img",{alt:"alert",src:Mt.a,className:"mr16"}),c.a.createElement("div",{className:"steel-grey fontsize12"},e($.alert))))}}]),t}(o.Component),oa=Object(d.d)(la),ca=Object(T.b)(function(e){var t=e.modal,a=t.show,n=t.modalType,r=t.entityId,i=t.requesting,s=t.subentity,l=e.events,o=(l=void 0===l?{}:l).events,c=void 0===o?{}:o,d=e.auth.authenticated_user,u=e.users;return{show:a&&n===Z.n.CANCEL_APPOINTMENT||n===Z.n.CANCEL_REMINDER,eventDetails:c[r],requesting:i,currentUserId:d,users:u,subentity:s}},function(e){return{cancelAppointment:function(t,a,n){return e(Object(Nt.o)(t,a,n))},cancelReminder:function(t,a){return e(Object(Nt.p)(t,a))},close:function(){return e(Object(Ct.g)())},fetchEventsData:function(t,a,n){return e(Object(Nt.x)(t,a,n))}}})(oa),da=Object(d.c)({verifyButton:{id:"app.modal.verifyButton",defaultMessage:"Verify"},reUploadButton:{id:"app.modal.reUploadButton",defaultMessage:"Re-upload (JPG,PDF)"},consentFormCheckbox:{id:"app.modal.consentFormCheckbox",defaultMessage:"Consent Form"},idProofCheckbox:{id:"app.modal.idProofCheckbox",defaultMessage:"ID Proof"}}),ua=a(206),ma=Object(d.c)({uploadedOn:{id:"app.doc_viewer.upload",defaultMessage:"Uploaded on"}}),pa=(a(1243),function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(s.a)(t).call(this,e))).renderImage=function(){var e=document.getElementsByClassName("document-container");a.imageViewer=window.ImageViewer(e),a.showImage()},a.onClickImage=function(e){e.preventDefault()},a.showImage=function(){var e=a.props.baseUrl,t=a.props.doc;void 0!==t&&a.imageViewer.load("".concat(e).concat(t.file))},a.imageViewer="",a.state={},a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.renderImage()}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.props.intl.formatMessage,t=this.props.doc,a=void 0===t?[]:t;void 0!==a&&this.renderImage();var n=a.uploadedOn,r=new X.a(n).format("DD/MM/YYYY hh:mm A");return c.a.createElement(o.Fragment,null,n?c.a.createElement("div",{className:"full-width flex justify-content-space-between"},c.a.createElement("div",{className:"fontsize12 cool-grey"},"".concat(e(ma.uploadedOn)," ").concat(r))):null,c.a.createElement("div",{id:"document-gallery"},c.a.createElement("div",{className:"document-container"})),c.a.createElement("div",{className:"fontsize12 cool-grey mt8 mb8 hide-desktop"},"Use Two finger pinch for Zoom in/out"))}}]),t}(o.Component)),fa=Object(d.d)(pa),va=(a(1245),a(697)),ha=Object(d.c)({uploadedOn:{id:"app.doc_viewer.upload",defaultMessage:"Uploaded on"}});va.pdfjs.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(va.pdfjs.version,"/pdf.worker.js");var ba=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(s.a)(t).call(this,e))).onDocumentLoadSuccess=function(e){var t=e.numPages;a.setState({numPages:t})},a.renderPages=function(){for(var e=[],t=a.state.numPages,n=1;n<=t;n++)e.push(c.a.createElement(va.Page,{key:n,pageNumber:n}));return e},a.state={numPages:null,pageNumber:1},a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.doc?this.props.baseUrl+this.props.doc.file:"";this.setState({pdfUrl:e})}},{key:"componentDidUpdate",value:function(e,t){if(this.props.doc!==e.doc){var a=this.props.doc?this.props.baseUrl+this.props.doc.file:"";this.setState({pdfUrl:a})}}},{key:"render",value:function(){var e=this.props.intl.formatMessage,t=this.props.doc,a=(void 0===t?[]:t).uploadedOn,n=new X.a(a).format("DD/MM/YYYY hh:mm A");return c.a.createElement(o.Fragment,null,a?c.a.createElement("div",{className:"full-width flex justify-content-space-between mb10"},c.a.createElement("div",{className:"fontsize12 cool-grey"},"".concat(e(ha.uploadedOn)," ").concat(n))):null,c.a.createElement("div",{className:"pdf-viewer"},c.a.createElement(va.Document,{file:this.state.pdfUrl,onLoadSuccess:this.onDocumentLoadSuccess},this.renderPages())))}}]),t}(o.Component),ga=Object(d.d)(ba),Ea=a(191),Oa=a.n(Ea),ya=(a(1247),Object(d.c)({myProfile:{id:"app.idproof.myprofile",defaultMessage:"My Profile / Settings"},idProof:{id:"app.idproof.idproof",defaultMessage:"ID Proof"},replaceWarning:{id:"app.idproof.replaceWarning",defaultMessage:"Re-uploading will replace the existing image files"},reUploadText:{id:"app.idproof.reUploadText",defaultMessage:"Re-upload (JPG, PDF)"},nextButton:{id:"app.idproof.nextButton",defaultMessage:"Next"},prevButton:{id:"app.idproof.prevButton",defaultMessage:"Prev"},uploadedOn:{id:"app.idproof.uploadedOn",defaultMessage:"Uploaded On"}})),Ca=a(349),Na=a(430),Aa="image/jpeg",Ta="application/pdf",ja=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(s.a)(t).call(this,e))).formatMessage=function(e){return a.props.intl.formatMessage(e)},a.onStart=function(e){a.setState({filename:e.name,progress:0})},a.onSuccess=function(e,t){},a.onError=function(e){},a.onProgress=function(e,t){var n=e.percent;a.setState({progress:parseInt(n)})},a.onAbort=function(e){},a.onUploadComplete=function(e){var t=e.files,n=void 0===t?[]:t,r=a.props.handleComplete,i=a.state.docs;a.setState({docs:Object(ne.a)(i).concat(Object(ne.a)(n))},function(){var e=a.state,t=e.docs,n=e.fileList;t.length===n.length&&(a.setState({fileList:[],docs:[]}),r(t))})},a.handleChange=function(e){var t=e.fileList;a.setState({fileList:t})},a.beforeUpload=function(e){var t=e.type===Aa,a=e.type===Ta;return t||a||Na.a.error("You can only upload JPG or PDF file!"),t||a},a.customRequest=function(e){var t=e.file,n=(e.filename,e.onError,e.onProgress),r=(e.onSuccess,Object(Q.a)(Object(Q.a)(a)).onUploadComplete),i=new FormData;return i.append("files",t,t.name),Object(ze.a)({onUploadProgress:function(e){var a=e.total,r=e.loaded;n({percent:Math.round(r/a*100).toFixed(2)},t)},method:Z.y.POST,data:i,url:qe.c.getUploadURL()}).then(function(e){r(e.payload.data)}),{abort:function(){}}},a.state={fileList:[],docs:[]},a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.uploadProps,a=e.label,n=void 0===a?"UPLOAD":a,r=this.handleChange,i=this.customRequest,s=this.state.fileList;return c.a.createElement(Ca.a,Object.assign({},t,{multiple:!0,customRequest:i,showUploadList:!1,fileList:s,onChange:r}),c.a.createElement(ee.a,{type:"ant-btn iqvia-btn mr16 ant-btn-primary ant-btn-background-ghost"},n))}}]),t}(o.Component),Da=Object(d.d)(ja),Ma=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(s.a)(t).call(this,e))).formatMessage=function(e){return a.props.intl.formatMessage(e)},a.isPdf=function(){var e=a.props.user_data,t=e.documents.idProof,n=void 0===t?[]:t;e.isIdProofUploaded&&n[a.state.currentIndex].file.includes(".pdf")?a.setState({isPdf:!0,totalSize:n.length}):a.setState({isPdf:!1,totalSize:n.length})},a.nextDocument=function(){if(a.state.currentIndex+1<a.state.totalSize){var e=a.state.currentIndex+1;a.setState({currentIndex:e},a.isPdf)}},a.previousDocument=function(){if(a.state.currentIndex-1>=0){var e=a.state.currentIndex-1;a.setState({currentIndex:e},a.isPdf)}},a.handleReupload=function(e){var t=a.props,n=t.reUploadIdProofs,r=t.user_data;n((r=void 0===r?{}:r).basicInfo._id,e).then(function(e){a.setState({isPdf:!1,currentIndex:0,totalSize:0},a.isPdf)})},a.state={isPdf:!1,currentIndex:0,totalSize:0},a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){window.scrollTo(0,0),this.isPdf()}},{key:"componentDidUpdate",value:function(e,t){this.props.modal&&this.props.user_data.documents!==e.user_data.documents&&this.setState({currentIndex:0},this.isPdf)}},{key:"render",value:function(){var e=this,t=this.props,a=t.user_data,n=a.documents.idProof,r=void 0===n?[]:n,i=a.baseDocUrl,s=t.modal,l=void 0!==s&&s;console.log("id props",this.props);var d=r.length<1?0:this.state.currentIndex+1,u=this.state,m=u.isPdf,p=u.currentIndex,f=u.totalSize,v={accept:"image/*,.pdf"};console.log("this.props.user_data",this.props.user_data.documents,p);var h=this.handleReupload,b=this.formatMessage;return c.a.createElement(o.Fragment,null,!l&&c.a.createElement(ua.a,null),!l&&c.a.createElement("div",{className:"hide-mobile hide-tablet-7 hide-tablet-9"},c.a.createElement("div",{className:"id-proof fixed_header_sticky"},c.a.createElement("div",{className:" text-align-l flex column align-items-start justify-content-center "},c.a.createElement("div",{className:"flex row align-items-center justify-content-start w100 pl20"},c.a.createElement("img",{className:"clickable",alt:"",onClick:function(t){t.preventDefault(),e.props.history.goBack()},src:Oa.a,style:{width:"20px"}}),c.a.createElement("div",{className:"dark fontsize12 pl20"},b(ya.myProfile)),c.a.createElement("div",{className:"text-align-l bold dark fontsize18 mb0 pl20"},b(ya.idProof)))),c.a.createElement("div",{className:"flex justify-content-end align-items-center"},c.a.createElement("div",{className:"fontsize12 cool-grey"},b(ya.replaceWarning)),c.a.createElement("div",{className:"mr16 ml16"},c.a.createElement(Da,{label:b(ya.reUploadText),uploadProps:v,handleComplete:h}))))),c.a.createElement("div",{className:"main-iqvia-container consent-document-viewer"},!l&&c.a.createElement("div",{className:"dark fontsize12 hide-desktop",style:{marginTop:100}},b(ya.myProfile)),c.a.createElement("div",{className:" text-align-l flex column align-items-start justify-content-center w100 mt32 "},c.a.createElement("div",{className:"flex row align-items-center justify-content-start w100 mb20 hide-desktop"},c.a.createElement("img",{alt:"",onClick:function(t){t.preventDefault(),e.props.history.goBack()},src:Oa.a,style:{width:"20px"}}),c.a.createElement("div",{className:"text-align-l bold dark fontsize18 mb0 pl20"},b(ya.idProof))),c.a.createElement("p",{className:"text"},d," / ",this.state.totalSize),m&&c.a.createElement("div",{className:"full-width full-height"},c.a.createElement(ga,{doc:r[p],baseUrl:i})),!this.state.isPdf&&c.a.createElement("div",{className:"full-width"},c.a.createElement(fa,{doc:r[p],baseUrl:i})),c.a.createElement("div",{className:"pdf-viewer flex align-items-center justify-content-space-between"},c.a.createElement("div",null,this.state.isPdf?"":c.a.createElement("div",{className:"fontsize12 cool-grey"},"Use Scroll to Zoom in/out"),c.a.createElement("div",{className:"fontsize12 cool-grey"},"Re-uploading will replace the existing files")),c.a.createElement("div",{className:"page-number"},c.a.createElement("div",{className:"padding-10"},c.a.createElement(ee.a,{disabled:p-1<0,onClick:this.previousDocument,className:"prev iqvia-btn"},b(ya.prevButton))),c.a.createElement("div",{className:"padding-10"},c.a.createElement(ee.a,{disabled:p+1>=f,onClick:this.nextDocument,className:"next iqvia-btn"},b(ya.nextButton))))),!l&&c.a.createElement("div",{className:"footer hide-desktop"},c.a.createElement("div",{className:"flex justify-content-space-between  align-items-center m0 ml16"},c.a.createElement("div",{className:"fontsize12 cool-grey mr16 ml16"},b(ya.replaceWarning)),c.a.createElement("div",{className:"mr16 ml16 mt10"},c.a.createElement(Da,{label:b(ya.reUploadText),uploadProps:v,handleComplete:h})))))))}}]),t}(o.Component),Ia=Object(d.d)(Ma),wa=(a(1249),Object(d.c)({myProfile:{id:"app.consentDocs.myprofile",defaultMessage:"My Profile / Settings"},consentDocs:{id:"app.consentDocs.consentDocs",defaultMessage:"Consent Form"},replaceWarning:{id:"app.consentDocs.replaceWarning",defaultMessage:"Re-uploading will replace the existing image files"},reUploadText:{id:"app.consentDocs.reUploadText",defaultMessage:"Re-upload (JPG, PDF)"},nextButton:{id:"app.consentDocs.nextButton",defaultMessage:"Next"},prevButton:{id:"app.consentDocs.prevButton",defaultMessage:"Prev"},uploadedOn:{id:"app.consentDocs.uploadedOn",defaultMessage:"Uploaded On"}})),Sa=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(s.a)(t).call(this,e))).formatMessage=function(e){return a.props.intl.formatMessage(e)},a.isPdf=function(){var e=a.props.user_data,t=e.documents.consentForm,n=void 0===t?[]:t;e.isConsentFormUploaded&&n[a.state.currentIndex].file.includes(".pdf")?a.setState({isPdf:!0,totalSize:n.length}):a.setState({isPdf:!1,totalSize:n.length})},a.nextDocument=function(){if(a.state.currentIndex+1<a.state.totalSize){var e=a.state.currentIndex+1;a.setState({currentIndex:e},a.isPdf)}},a.previousDocument=function(){if(a.state.currentIndex-1>=0){var e=a.state.currentIndex-1;a.setState({currentIndex:e},a.isPdf)}},a.handleReupload=function(e){var t=a.props,n=t.reUploadConsentDocs,r=t.user_data;n((r=void 0===r?{}:r).basicInfo._id,e).then(function(e){a.setState({isPdf:!1,currentIndex:0,totalSize:0,isConsentFormUploaded:!0},a.isPdf)})},a.state={isPdf:!1,currentIndex:0,totalSize:0},a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){window.scrollTo(0,0),this.isPdf()}},{key:"componentDidUpdate",value:function(e,t){this.props.modal&&this.props.user_data.documents!==e.user_data.documents&&this.setState({currentIndex:0},this.isPdf)}},{key:"render",value:function(){var e=this,t=this.props,a=t.user_data,n=a.documents.consentForm,r=void 0===n?[]:n,i=a.baseDocUrl,s=t.modal,l=void 0!==s&&s,d=r.length<1?0:this.state.currentIndex+1,u=this.state,m=u.isPdf,p=u.currentIndex,f=u.totalSize,v={accept:"image/*,.pdf"},h=this.handleReupload,b=this.formatMessage;return c.a.createElement(o.Fragment,null,!l&&c.a.createElement(ua.a,null),!l&&c.a.createElement("div",{className:"hide-mobile hide-tablet-7 hide-tablet-9"},c.a.createElement("div",{className:"consent-form fixed_header_sticky"},c.a.createElement("div",{className:"  text-align-l flex column align-items-start justify-content-space-between  "},c.a.createElement("div",{className:"flex row align-items-center justify-content-start w100 pl20"},c.a.createElement("img",{className:"clickable",alt:"",onClick:function(t){t.preventDefault(),e.props.history.goBack()},src:Oa.a,style:{width:"20px"}}),c.a.createElement("div",{className:"dark fontsize12 pl20"},b(wa.myProfile)),c.a.createElement("div",{className:"text-align-l bold dark fontsize18 mb0 pl20"},b(wa.consentDocs)))),c.a.createElement("div",{className:"flex justify-content-end  align-items-center"},c.a.createElement("div",{className:"fontsize12 cool-grey"},b(wa.replaceWarning)),c.a.createElement("div",{className:"mr16 ml16"},c.a.createElement(Da,{label:b(wa.reUploadText),uploadProps:v,handleComplete:h}))))),c.a.createElement("div",{className:"main-iqvia-container consent-document-viewer"},!l&&c.a.createElement("div",{className:"dark fontsize12 hide-desktop",style:{marginTop:100}},b(wa.myProfile)),c.a.createElement("div",{className:" text-align-l flex column align-items-start justify-content-center w100 mt32 "},c.a.createElement("div",{className:"flex row align-items-center justify-content-start w100 mb20 hide-desktop"},c.a.createElement("img",{alt:"",onClick:function(t){t.preventDefault(),e.props.history.goBack()},src:Oa.a,style:{width:"20px"}}),c.a.createElement("h1",{className:"text-align-l bold dark fontsize18 mb0 pl20"},b(wa.consentDocs))),c.a.createElement("p",{className:"text"},d," / ",f),m&&c.a.createElement("div",{className:"full-width full-height"},c.a.createElement(ga,{doc:r[p],baseUrl:i})),!m&&c.a.createElement("div",{className:"full-width"},c.a.createElement(fa,{doc:r[p],baseUrl:i})),c.a.createElement("div",{className:"pdf-viewer flex align-items-center justify-content-space-between"},c.a.createElement("div",null,this.state.isPdf?"":c.a.createElement("div",{className:"fontsize12 cool-grey"},"Use Scroll to Zoom in/out"),c.a.createElement("div",{className:"fontsize12 cool-grey"},"Re-uploading will replace the existing files")),c.a.createElement("div",{className:"page-number"},c.a.createElement("div",{className:"padding-10"},c.a.createElement(ee.a,{disabled:p-1<0,onClick:this.previousDocument,className:"prev iqvia-btn"},b(wa.prevButton))),c.a.createElement("div",{className:"padding-10"},c.a.createElement(ee.a,{disabled:p+1>=f,className:"next iqvia-btn",onClick:this.nextDocument},b(wa.nextButton))))),!l&&c.a.createElement("div",{className:"footer hide-desktop"},c.a.createElement("div",{className:"flex justify-content-space-between align-items-center m0 ml16"},c.a.createElement("div",{className:"fontsize12 cool-grey mr16 ml16"},b(wa.replaceWarning)),c.a.createElement("div",{className:"mr16 ml16 mt10"},c.a.createElement(Da,{label:b(wa.reUploadText),uploadProps:v,handleComplete:h})))))))}}]),t}(o.Component),ka=Object(d.d)(Sa),Pa=a(215),Ra=a.n(Pa),xa=a(209),La=a.n(xa),Ua="IdProof",Fa="ConsentForm",Va=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(s.a)(t).call(this,e))).handleCancel=function(e){e&&e.preventDefault(),a.setState({openConsent:!0,isConsentVerified:!1,isIdProofVerified:!1}),a.props.purpose||a.setState({currentField:Fa}),(0,a.props.close)()},a.handleVerify=function(e){e.preventDefault();var t=a.props,n=t.patientId,r=t.verifyDocuments,i=a.state,s=i.isConsentVerified,l=i.isIdProofVerified;if(s&&l){r(n,{verifyConsentForm:!0,verifyIdProof:!0})}else if(s){r(n,{verifyConsentForm:!0,verifyIdProof:!1})}else if(l){r(n,{verifyConsentForm:!1,verifyIdProof:!0})}a.handleCancel()},a.formatMessage=function(e){return a.props.intl.formatMessage(e)},a.handleMenu=function(e){"1"===e.key?a.setState({currentField:Fa}):"2"===e.key&&a.setState({currentField:Ua}),a.setState({openConsent:!a.state.openConsent})},a.handleConsentClick=function(e){a.setState({isConsentVerified:e.target.checked})},a.handleIdClick=function(e){a.setState({isIdProofVerified:e.target.checked})},a.handleDisable=function(){var e=a.props,t=e.patientId,n=(e.users[t]||{}).documents,r=(n=void 0===n?{}:n).consentFormVerified,i=void 0!==r&&r,s=n.idProofVerified,l=void 0!==s&&s,o=a.state,c=o.isConsentVerified,d=o.isIdProofVerified;return i===c&&l===d},a.handleReupload=function(e){var t=a.state.openConsent,n=a.props,r=n.reUploadConsentDocs,i=n.reUploadIdProofs,s=n.patientId;t?(r(s,e),a.setState({isConsentVerified:!1})):t||(i(s,e),a.setState({isIdProofVerified:!1}))},a.footer=function(){var e=a.props,t=e.requesting,n=e.patientId,r=e.users,i=e.purpose,s=e.currentUser,l=(s=void 0===s?{}:s).basicInfo;if((l=void 0===l?{}:l).category===Z.D.DOCTOR)return null;var d=Object(Q.a)(Object(Q.a)(a)),u=d.formatMessage,m=d.handleVerify,p=d.handleDisable,f=d.handleReupload,v=(r[n]||{}).documents,h=(v=void 0===v?{}:v).consentForm,b=void 0===h?[]:h,g=v.consentFormVerified,E=void 0!==g&&g,O=v.idProof,y=void 0===O?[]:O,C=v.idProofVerified,N=void 0!==C&&C,A=a.state,T=A.isConsentVerified,j=A.isIdProofVerified,D=u(da.reUploadButton);return c.a.createElement("div",{className:"flex align-items-center justify-content-end h72px mr24"},!i&&c.a.createElement(o.Fragment,null,c.a.createElement(he.a,{defaultChecked:T,checked:T,disabled:E||b.length<1,onChange:a.handleConsentClick},c.a.createElement("span",{className:"fontsize14 dark mr16"},u(da.consentFormCheckbox))),c.a.createElement(he.a,{defaultChecked:j,checked:j,disabled:N||y.length<1,onChange:a.handleIdClick},c.a.createElement("span",{className:"fontsize14 dark mr24"},u(da.idProofCheckbox)))),c.a.createElement(Da,{uploadProps:{accept:"image/*,.pdf"},label:D,handleComplete:f}),!i&&c.a.createElement(ee.a,{type:"primary iqvia-btn",onClick:m,loading:t,disabled:p()},u(da.verifyButton)))},a.state={openConsent:!0,isConsentVerified:!1,isIdProofVerified:!1,fileList:[],currentField:Fa},a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.patientId,a=e.users,n=e.purpose,r=a[t]||{},i=r.documents,s=void 0===i?{}:i,l=void 0!==r&&s.consentFormVerified,o=void 0!==r&&s.idProofVerified;this.setState({isConsentVerified:l}),this.setState({isIdProofVerified:o}),n&&(n===Ua?this.setState({currentField:Ua}):this.setState({currentField:Fa}))}},{key:"componentDidUpdate",value:function(e,t){if(this.props.purpose!==e.purpose){var a=this.props.purpose;a&&a===Ua?this.setState({currentField:Ua}):this.setState({currentField:Fa})}if(this.props.patientId!==e.patientId){var n=this.props,r=n.patientId,i=(n.users[r]||{}).documents,s=(i=void 0===i?{}:i).consentFormVerified,l=void 0!==s&&s,o=i.idProofVerified,c=void 0!==o&&o;this.setState({isConsentVerified:l,isIdProofVerified:c})}}},{key:"render",value:function(){var e=this.props,t=e.show,a=e.intl.formatMessage,n=e.users,r=e.patientId,i=e.currentUser,s=e.purpose;if(!1===t||!r)return null;var l=this.state.currentField,o=n[r]||{},d=o.documents,u=void 0===d?{}:d,m=i.basicInfo,f=(m=void 0===m?{}:m).category,v=void 0!==o?o.basicInfo.name:null,h=void 0!==o&&u.consentFormVerified,b=void 0!==o&&u.idProofVerified,g=this.handleCancel,E=this.footer,O=this.handleMenu,y={visible:t,title:f===Z.D.PATIENT?"My Documents":v+"'s Details",okButtonProps:{},onCancel:g,wrapClassName:"global-modal",destroyOnClose:!0,bodyStyle:{height:"auto"},width:"1000px",footer:E(),className:"document-verification-modal"},C="1";return s===Ua&&(C="2"),c.a.createElement(Y.a,y,c.a.createElement("div",{className:"document-modal"},c.a.createElement(p.a,{className:"black",mode:"horizontal",defaultSelectedKeys:[C]},c.a.createElement(p.a.Item,{key:"1",onClick:O},a(da.consentFormCheckbox),c.a.createElement("img",{className:"ml10 mb4",alt:"",src:h?Ra.a:La.a})),c.a.createElement(p.a.Item,{key:"2",onClick:O},a(da.idProofCheckbox),c.a.createElement("img",{className:"ml10 mb4",alt:"",src:b?Ra.a:La.a}))),l===Ua&&t&&c.a.createElement(Ia,{modal:!0,user_data:o}),l===Fa&&t&&c.a.createElement(ka,{modal:!0,user_data:o})))}}]),t}(o.Component),_a=Object(d.d)(Va),Ba=Object(T.b)(function(e){var t=e.modal,a=e.users,n=e.auth,r=Object(At.c)();return{show:t.show&&t.modalType===Z.n.DOCUMENTS_MODAL,requesting:t.requesting,purpose:t.purpose,patientId:t.entityId,users:a,currentUser:r(a,n.authenticated_user)}},function(e){return{close:function(){return e(Object(Ct.g)())},verifyDocuments:function(t,a){return e(Object(St.q)(t,a))},reUploadIdProofs:function(t,a){return e(Object(St.p)(t,a))},reUploadConsentDocs:function(t,a){return e(Object(St.o)(t,a))}}})(_a),Ya=Object(d.c)({adverseEvent:{id:"app.modal.adverseEvent",defaultMessage:"Report Adverse Event"},cancel:{id:"app.modal.adverseEvent.cancel",defaultMessage:"Cancel"},tagAPatient:{id:"app.modal.adverseEvent.tagAPatient",defaultMessage:"Tag a patient"},whatHappen:{id:"app.modal.adverseEvent.whatHappen",defaultMessage:"Describe what happened"},on:{id:"app.modal.adverseEvent.on",defaultMessage:"On"},at:{id:"app.modal.adverseEvent.at",defaultMessage:"At"},severity:{id:"app.modal.adverseEvent.severity",defaultMessage:"Severity"},mild:{id:"app.modal.adverseEvent.mild",defaultMessage:"Mild"},moderate:{id:"app.modal.adverseEvent.moderate",defaultMessage:"Moderate"},severe:{id:"app.modal.adverseEvent.severe",defaultMessage:"Severe"},verySevere:{id:"app.modal.adverseEvent.verySevere",defaultMessage:"Very Severe"},fatal:{id:"app.modal.adverseEvent.fatal",defaultMessage:"Fatal"},upload:{id:"app.modal.adverseEvent.upload",defaultMessage:"Upload photos or files"},report:{id:"app.modal.adverseEvent.report",defaultMessage:"Report"},medicationDetails:{id:"app.modal.adverseEvent.medicationDetails",defaultMessage:"Medication Details"},lastMedicatedOn:{id:"app.modal.adverseEvent.lastMedicatedOn",defaultMessage:"Last medicated on"},daysOfMedicationLeftTill:{id:"app.modal.adverseEvent.daysOfMedicationLeftTill",defaultMessage:"days of medication left till"}}),za=z.a.Item,qa=le.a.TextArea,Ha=se.a.Option,Wa=J.a.Group,Ga=J.a.Button,Qa=c.a.createElement("img",{src:Ye.a,alt:"d",className:"w24 h24"}),Ja="patient",Ka=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(s.a)(t).call(this,e))).getParentNode=function(e){return e.parentNode},a.getSeverityOption=function(){var e=Object(Q.a)(Object(Q.a)(a)).formatMessage;return[{label:e(Ya.mild),value:Z.A.MILD},{label:e(Ya.moderate),value:Z.A.MODERATE},{label:e(Ya.severe),value:Z.A.SEVERE},{label:e(Ya.verySevere),value:Z.A.VERY_SEVERE},{label:e(Ya.fatal),value:Z.A.FATAL}].map(function(e){return c.a.createElement(Ga,{key:e.value,value:e.value,className:"full-width"},e.label)})},a.formatMessage=function(e){return a.props.intl.formatMessage(e)},a.handleConfirmBlur=function(e){var t=e.target.value;a.setState({confirmDirty:a.state.confirmDirty||!!t})},a.handleSubmit=function(e){e.preventDefault()},a.getPatientOption=function(){var e=a.state.patients;return(void 0===e?[]:e).map(function(e){var t=e.basicInfo,a=t._id,n=t.name,r=t.profilePicLink,i=void 0===r?ge.a:r,s=e.personalInfo,l=s.dob,o=s.gender,d=l&&X()().diff(l,"years",!1);return c.a.createElement(Ha,{key:a,value:a,name:n},c.a.createElement("div",{className:"flex justify-content-start align-items-center iqvia-user-snippet"},c.a.createElement("img",{alt:"user",src:i}),c.a.createElement("div",{className:"deep-sea-blue fontsize12 mr8"},"".concat(n).concat(d?" (".concat(d," ").concat(o,")"):""))))})},a.openCalendar=function(e){e.preventDefault(),window.document.getElementsByClassName("ant-calendar-picker-input")[0].click()},a.getLatestMedication=function(){var e=a.props,t=e.medications,n=void 0===t?{}:t,r=e.products,i=e.form.getFieldValue,s=e.intl.formatMessage,l=a.props,d=l.auth.basicInfo._id,u=d===l.userId?d:i(Ja);if(u){var m=n[u];if(m){var p=m.medicine,f=void 0===p?{}:p,v=Object.keys(f)||[],h=v.filter(function(e){return"updatedAt"!==e}),b=f.updatedAt,g=X()(b);return c.a.createElement(o.Fragment,null,c.a.createElement("div",{className:"flex align-items-center mb12"},c.a.createElement("div",{className:"fontsize14 dark bold"},s(Ya.medicationDetails)),v.length>0?c.a.createElement("div",{className:"fontsize12 label-color ml8"},"".concat(s(Ya.lastMedicatedOn)," ").concat(g.format("DD/MM/YYYY hh:mm A"))):""),h.map(function(e,t){var a=f[e],n=a.product_id,i=a.often,l=a.upto,d=r[n]||{},u=X()(l).format("L"),m=-1*X()().diff(l,"days",!1);return c.a.createElement(o.Fragment,{key:n},c.a.createElement("div",{className:"dark fontsize14"},d.name),c.a.createElement("div",{className:"mb20 dark fontsize14"},"".concat(i,", ").concat(m>0?m:0," ").concat(s(Ya.daysOfMedicationLeftTill)," ").concat(u)))}))}}return null},a.onChangePatient=function(e){(0,a.props.fetchUserRecentMedication)(e)},a.disabledDate=function(e){return e&&e>=X()()},a.validateTime=function(){var e=Object(G.a)(W.a.mark(function e(t,a,n){return W.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a>X()()?n("reporting event for future is not allowed"):n();case 1:case"end":return e.stop()}},e,this)}));return function(t,a,n){return e.apply(this,arguments)}}(),a.state={members:[],category:""},a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e,t=this,a=this.props.auth;a&&(e=a.basicInfo.category,this.setState({category:e}));this.props.form.validateFields(),e!==Ja&&Object(ze.a)({url:qe.h.getRelatedMembersURL()}).then(function(e){var a=e.payload,n=(a=void 0===a?{}:a).data,r=(n=void 0===n?{}:n).members,i=(void 0===r?{}:r).filter(function(e){var t=e.basicInfo;return(t=void 0===t?{}:t).category===Z.D.PATIENT});t.setState({patients:i})}).catch(function(e){})}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.form,a=e.userId,n=t.getFieldDecorator,r=t.getFieldError,i=t.isFieldTouched,s=this.formatMessage,l=this.handleSubmit,o=this.getSeverityOption,d=this.getPatientOption,u=this.openCalendar,m=this.getLatestMedication,p=this.onChangePatient,f=this.validateTime,v=this.state.category,h=i(Ja)&&r(Ja),b=i("description")&&r("description"),g=i("at")&&r("at");return c.a.createElement(z.a,{className:"event-form",onSubmit:l},v!==Ja&&c.a.createElement("div",{ref:this.setParticipantRef,id:"asasa"},c.a.createElement(za,{label:s(Ya.tagAPatient),validateStatus:h?"error":"",help:h||""},n(Ja,{rules:[{required:!0,message:"Enter a patient"}],initialValue:a})(c.a.createElement(se.a,{className:"user-select",onChange:p,disabled:!!a,placeholder:s(Ya.tagAPatient),showSearch:!0,autoComplete:"off",optionFilterProp:"name",suffixIcon:Qa,filterOption:function(e,t){return t.props.name.toLowerCase().indexOf(e.toLowerCase())>=0},getPopupContainer:this.getParentNode},d())))),c.a.createElement(za,{validateStatus:b?"error":"",help:b||"",label:s(Ya.whatHappen)},n("description",{rules:[{required:!0,message:"Enter a description"}]})(c.a.createElement(qa,{autosize:{minRows:1,maxRows:6}}))),c.a.createElement("div",{className:"flex justify-content-space-between mb4"},c.a.createElement("div",{className:"flex-1 flex row align-items-end iqvia-date-picker"},c.a.createElement("div",{className:"full-width ",ref:this.setDatePickerRef},c.a.createElement(za,{className:"flex-1 date-picker",label:s(Ya.on)},n("on",{rules:[],initialValue:X()()})(c.a.createElement(ae.a,{format:"DD/MM/YYYY, ddd",disabledDate:this.disabledDate,showToday:!1,className:"full-width",suffixIcon:null,getCalendarContainer:this.getParentNode})),c.a.createElement("img",{alt:"",className:"calendar",onClick:u,src:_e.a})))),c.a.createElement("div",{ref:this.setTimePickerRef},c.a.createElement(za,{label:s(Ya.at),validateStatus:g?"error":"",help:g||""},n("at",{rules:[{validator:f}],initialValue:X()()})(c.a.createElement(te.a,{use12Hours:!0,format:"h:mm A",style:{width:"100%"},suffixIcon:null,alowClear:!1,clearIcon:null,getPopupContainer:this.getParentNode}))))),c.a.createElement(za,{label:s(Ya.severity)},n("severity",{rules:[],initialValue:Z.A.MILD})(c.a.createElement(Wa,{className:"radio-group-tab ",buttonStyle:"solid"},o()))),c.a.createElement("div",null,m()))}}]),t}(o.Component),Xa=Object(d.d)(Ka),Za=a(30),$a=a(495),en=a(638),tn=a.n(en);a(1251);function an(e){var t=e.media,a=e.onRemove,n=[];return t.forEach(function(e,t){"WebLink"!==e.mediaType&&n.push(c.a.createElement("div",{className:"mr12 mb24",key:t},c.a.createElement("img",{src:tn.a,alt:"",onClick:function(){return a(e.index)},className:"delete-attachment-badge clickable"}),c.a.createElement("div",{className:"case-image-background"},c.a.createElement($a.a,{type:e.mediaType,className:"caseImage",src:e.url}))))}),c.a.createElement("div",{className:"mb5 mt10 flex flex-wrap"},n)}var nn=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(s.a)(t).call(this,e))).handleCancel=function(e){e&&e.preventDefault();var t=a.props.close;a.setState({disabledOk:!0,docs:[],fileList:[],errorMsg:""},t)},a.handleReport=function(){var e,t=a.props,n=t.report,r=t.reFetchAdverseEvent,i=t.medications,s=void 0===i?{}:i,l=t.authUser,o=Object(Q.a)(Object(Q.a)(a)).formRef,c=void 0===o?{}:o,d=a.state.docs,u=c.props.form.validateFields;if(l){var m=l.basicInfo._id;e=m}u(function(t,i){if(!t){var l=i.patient;l||(i.patient=e,l=e);var o=(s[l]||{}).medicine,c=void 0===o?[]:o;n(Object(q.a)({},i,{docs:d,medications:[c]})).then(function(e){r(l),a.setState({docs:[],disabledOk:!0,fileList:[],errorMsg:""})})}})},a.formatMessage=function(e){return a.props.intl.formatMessage(e)},a.onStart=function(e){a.setState({filename:e.name,progress:0})},a.onSuccess=function(e,t){},a.onError=function(e){},a.onProgress=function(e,t){var n=e.percent;a.setState({progress:parseInt(n)})},a.onAbort=function(e){},a.onUploadComplete=function(e){var t=e.files,n=void 0===t?[]:t,r=a.state.docs;a.setState({docs:Object(ne.a)(r).concat(Object(ne.a)(n))},function(){var e=a.state;e.docs,e.fileList})},a.customRequest=function(e){var t=e.file,n=(e.filename,e.onError,e.onProgress),r=(e.onSuccess,Object(Q.a)(Object(Q.a)(a)).onUploadComplete),i=new FormData;return i.append("files",t,t.name),Object(ze.a)({onUploadProgress:function(e){var a=e.total,r=e.loaded;n({percent:Math.round(r/a*100).toFixed(2)},t)},method:Z.y.POST,data:i,url:qe.c.getUploadURL()}).then(function(e){r(e.payload.data)}),{abort:function(){}}},a.removeAttachment=function(e){var t=a.state,n=t.docs,r=t.fileList,i=n.filter(function(t,a){return a!==e}),s=r.filter(function(t,a){return a!==e});a.setState({docs:i,fileList:s})},a.handleChange=function(e){var t=e.fileList;a.setState({fileList:t})},a.beforeUpload=function(e){var t=e.type.startsWith("image")||e.type.endsWith("pdf");return t||a.setState({errorMsg:"please upload a valid image or pdf file!"}),t},a.footer=function(){var e=a.props.requesting,t=Object(Q.a)(Object(Q.a)(a)),n=t.formatMessage,r=t.handleChange,i=t.handleCancel,s=t.handleReport,l=t.customRequest,o=t.beforeUpload,d=a.state,u=d.disabledOk,m=d.fileList;return c.a.createElement("div",{className:"flex align-items-center justify-content-space-between h72px mr24"},c.a.createElement(Ca.a,{onChange:r,customRequest:l,multiple:!0,fileList:m,showUploadList:!1,accept:"image/*,.pdf",beforeUpload:o},c.a.createElement(ee.a,{className:"iqvia-btn upload ml24"},n(Ya.upload))),c.a.createElement("div",null,c.a.createElement(ee.a,{className:"iqvia-btn cancel mr8",onClick:i},n(Ya.cancel)),c.a.createElement(ee.a,{className:"iqvia-btn",disabled:u,type:"primary",loading:e,onClick:s},n(Ya.report))))},a.setFormRef=function(e){a.formRef=e,a.setState({formRef:!0})},a.onFormChanges=function(e,t){var n=Object(Ie.a)(e.form.getFieldsError());a.state.disabledOk!==n&&e.form.isFieldsTouched()&&a.setState({disabledOk:n})},a.docslist=function(){var e=a.state,t=e.docs,n=e.fileList;return t.map(function(e,t){var a=n[t],r=a.name;return{name:r,description:r,mediaType:a.type,index:t,id:e,uid:a.uid,url:"".concat(Za.a.BASE_DOC_URL).concat(e)}})},a.resetMsg=function(){a.setState({errorMsg:""})},a.state={disabledOk:!0,docs:[],fileList:[],errorMsg:""},a.FormWrapper=z.a.create({onFieldsChange:a.onFormChanges})(Xa),a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.show,a=e.isError,n=e.intl.formatMessage,r=e.userId,i=e.medications,s=e.products,l=e.fetchUserRecentMedication,o=e.authUser,d=this.handleCancel,u=this.docslist,m=this.footer,p=this.setFormRef,f=this.FormWrapper,v=this.removeAttachment,h=this.resetMsg,b=this.state.errorMsg,g={visible:t||a,title:n(Ya.adverseEvent),okButtonProps:{},onCancel:d,wrapClassName:"global-modal full-height",destroyOnClose:!0,bodyStyle:{height:"100%",overflowY:"hidden"},width:"620px",footer:m()};return c.a.createElement(Y.a,g,t&&c.a.createElement("div",{className:"pl48 pr24 adverse-event-form"},c.a.createElement(f,{wrappedComponentRef:p,userId:r,fetchUserRecentMedication:l,medications:i,products:s,show:t,auth:o}),c.a.createElement("div",{className:"doc-preview"},c.a.createElement(an,{media:u(),onRemove:v}))),b.length>0&&c.a.createElement(bt.a,{msg:b,close:h,className:"adverse-event-error"}))}}]),t}(o.Component),rn=Object(d.d)(nn),sn=a(56),ln=Object(T.b)(function(e){var t=e.modal,a=t.show,n=t.modalType,r=t.data,i=t.requesting,s=e.medications,l=void 0===s?{}:s,o=e.products,c=void 0===o?{}:o,d=e.auth,u=void 0===d?{}:d,m=e.users,p=Object(At.c)();return{show:a&&n===Z.n.ADVERSE_EVENTS,userId:r,requesting:i,medications:l,products:c,authUser:p(m,u.authenticated_user)}},function(e){return{report:function(t){return e(Object(Ct.j)(t))},reFetchAdverseEvent:function(t){return e(Object(Nt.u)(t))},close:function(){return e(Object(Ct.g)())},fetchUserRecentMedication:function(t){return e(Object(sn.c)(t))}}})(rn),on=a(39),cn=Object(d.c)({updatemedication:{id:"app.Medication.updatemedication",defaultMessage:"Update Medication"},addmedication:{id:"app.Medication.addmedication",defaultMessage:"Add Medication"},medicine:{id:"app.Medication.medicine",defaultMessage:"Medicine"},of:{id:"app.Medication.of",defaultMessage:"of"},drugName:{id:"app.Medication.drugName",defaultMessage:"Drug Name"},medicationgivenuntil:{id:"app.Medication.medicationgivenuntil",defaultMessage:"Medication given until"},daysremaining:{id:"app.Medication.daysremaining",defaultMessage:"days remaining"},howOften:{id:"app.Medication.howOften",defaultMessage:"How Often"},submit:{id:"app.Medication.Submit",defaultMessage:"Submit"},cancel:{id:"app.Medication.cancel",defaultMessage:"Cancel"},remove:{id:"app.Medication.remove",defaultMessage:"Remove"},lastmedicatedon:{id:"app.Medication.lastmedication",defaultMessage:"Last medicated on"},dosageInterval:{id:"app.Medication.dosageInterval",defaultMessage:"Dosage Interval"}}),dn=z.a.Item,un=se.a.Option,mn="EDIT";function pn(e){return e&&e<X()().endOf("day")}var fn=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,l=new Array(r),o=0;o<r;o++)l[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(l)))).handleCancel=function(e){e&&e.preventDefault(),(0,a.props.close)()},a.openCalendar=function(e){e.preventDefault(),window.document.getElementsByClassName("ant-calendar-picker-input")[0].click()},a.handleRemove=function(e){e&&e.preventDefault();var t=a.props,n=t.removeMedication,r=t.patientId;n(t.productId,r),(0,a.props.close)()},a.handleSubmit=function(e){e.preventDefault();var t=a.props,n=t.addMedication,r=t.close,i=a.props.patientId;a.props.form.validateFields(function(e,t){e||n(t,i)}),r()},a.formatMessage=function(e){return a.props.intl.formatMessage(e)},a.footer=function(){var e=a.props,t=e.requesting,n=e.purpose,r=Object(Q.a)(Object(Q.a)(a)),i=r.formatMessage,s=r.handleCancel,l=r.handleRemove;return c.a.createElement("div",{className:"flex align-items-center ".concat(n===mn?"justify-content-space-between":"justify-content-end","  h72px mr24 ml24")},n===mn&&c.a.createElement(ee.a,{className:"iqvia-btn warning remove",type:"primary",loading:t,onClick:l},i(cn.remove)),c.a.createElement("div",{className:"flex align-items-center justify-content-end"},c.a.createElement(ee.a,{className:"iqvia-btn cancel mr8",onClick:s},i(cn.cancel)),c.a.createElement(ee.a,{type:"primary iqvia-btn",htmlType:"submit",onClick:a.handleSubmit},i(cn.submit))))},a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.show,a=e.isError,n=e.intl.formatMessage,r=e.products_data,i=e.medications_data,s=e.productId,l=e.patientId,o=e.purpose,d=e.productIds,u=void 0===d?[]:d,m="",p="",f=X()();if(!1===t)return null;var v=this.props.form.getFieldDecorator,h=[],b="",g=[],E=[];if(i.hasOwnProperty(l)){var O=i[l];if(O.hasOwnProperty("userId")){var y=O.medicine,C=y.updatedAt,N=Object(on.a)(y,["updatedAt"]);if(b=C,h=Object.keys(N),o===mn&&h.length>0){g=h.length,E=h.indexOf(s);var A=N[s],T=A.often,j=void 0===T?"":T,D=A.upto,M=void 0===D?"":D;m=s,p=j,f=X()(M),h=[]}}}var I=u.filter(function(e){return!h.includes(e)}).map(function(e){var t=r[e]||{};return c.a.createElement(un,{key:e,value:e},t.name)}),w=X()(b).format("L"),S=X()(b).format("LT"),k=this.handleCancel,P=this.footer,R=this.openCalendar,x={visible:t||a,title:n(o===mn?cn.updatemedication:cn.addmedication),okButtonProps:{},onCancel:k,wrapClassName:"global-modal full-height",destroyOnClose:!0,bodyStyle:{height:"100%"},width:"480px",footer:P()};return c.a.createElement(Y.a,x,c.a.createElement("div",{className:"pl48 pr24"},o===mn&&c.a.createElement("div",{className:"fontsize12 label-color mb16"},c.a.createElement("span",{className:"fontsize14 bold dark mr8"},n(cn.medicine)," ",E+1," ",n(cn.of)," ",g)," ",n(cn.lastmedicatedon)," ",w,","," ",S),c.a.createElement(z.a,{className:"event-form"},c.a.createElement("div",{className:"mt10"},c.a.createElement("div",{className:"fontsize12 label-color  mb8"},n(cn.drugName)),c.a.createElement(dn,null,v("product_id",{initialValue:m})(c.a.createElement(se.a,{placeholder:n(cn.drugName),suffixIcon:c.a.createElement("img",{alt:"",src:Ye.a}),disabled:o===mn},I)))),c.a.createElement(dn,{label:n(cn.dosageInterval)},v("often",{initialValue:p})(c.a.createElement(se.a,{placeholder:n(cn.howOften),suffixIcon:c.a.createElement("img",{alt:"",src:Ye.a})},c.a.createElement(un,{key:"Daily Once"},"DailyOnce"),c.a.createElement(un,{key:"Weekly Twice"},"WeeklyTwice")))),c.a.createElement("div",{className:"fontsize12 label-color  mb8"},n(cn.medicationgivenuntil)),c.a.createElement("div",{className:"flex-1 flex row align-items-end iqvia-date-picker"},c.a.createElement("div",{className:"full-width "},c.a.createElement(dn,null,v("upto",{initialValue:f})(c.a.createElement(ae.a,{format:"DD/MM/YYYY, ddd",showToday:!1,className:"full-width",suffixIcon:null,disabledDate:pn,placeholder:n(cn.medicationgivenuntil)})),c.a.createElement("img",{alt:"",className:"calendar",onClick:R,src:_e.a})))))))}}]),t}(o.Component),vn=z.a.create()(Object(d.d)(fn)),hn=a(257),bn=Object(T.b)(function(e){var t=e.modal,a=e.products,n=e.medications,r=e.users,i=e.programs,s=Object(hn.a)();return{show:t.show&&t.modalType===Z.n.MEDICATION,requesting:t.requesting,patientId:t.entityId,purpose:t.purpose,productId:t.data,productIds:s(r,t.entityId,i),products_data:a,medications_data:n}},function(e){return{close:function(){return e(Object(Ct.g)())},addMedication:function(t,a){return e(Object(sn.a)(t,a))},removeMedication:function(t,a){return e(Object(sn.d)(t,a))}}})(vn),gn=Object(d.c)({cancel:{id:"app.modal.cancel",defaultMessage:"Cancel"},changeButton:{id:"app.modal.changeButton",defaultMessage:"Change"}}),En=a(653),On=a.n(En),yn=a(654),Cn=a.n(yn),Nn=z.a.Item,An="confirmPassword",Tn="newPassword",jn=[An,"currentPassword",Tn],Dn=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(s.a)(t).call(this,e))).handleCancel=function(e){e&&e.preventDefault(),(0,a.props.close)()},a.formatMessage=function(e){return a.props.intl.formatMessage(e)},a.footer=function(e,t,n){var r=Object(Q.a)(Object(Q.a)(a)),i=r.formatMessage,s=r.handleCancel,l=a.props.form.getFieldsError;return c.a.createElement(o.Fragment,null,c.a.createElement("div",{className:"flex align-items-center justify-content-end h72px mr24 ml24"},c.a.createElement("div",{className:"flex align-items-center justify-content-end"},c.a.createElement(ee.a,{className:"iqvia-btn cancel mr8",onClick:s},i(gn.cancel)),c.a.createElement(ee.a,{type:"primary iqvia-btn",htmlType:"submit",onClick:a.handleSubmit,disabled:Object(Ie.a)(l())},i(gn.changeButton)))))},a.hideShowCurrentPass=function(e){e.preventDefault();var t=a.state.showCurrentPass;a.setState({showCurrentPass:!t})},a.hideShowNewPass=function(e){e.preventDefault();var t=a.state.showNewPass;a.setState({showNewPass:!t})},a.hideShowConfirmPass=function(e){e.preventDefault();var t=a.state.showConfirmPass;a.setState({showConfirmPass:!t})},a.handleConfirmBlur=function(e){var t=e.target.value;a.setState({confirmDirty:a.state.confirmDirty||!!t})},a.handleChangePassword=function(){var e=Object(G.a)(W.a.mark(function e(t){return W.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(0,a.props.changePassword)(t);case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.handleSubmit=function(e){e.preventDefault();var t=Object(Q.a)(Object(Q.a)(a)).handleChangePassword;a.props.form.validateFields(function(e,a){e||t(a)})},a.compareToFirstPassword=function(e,t,n){var r=a.props.form;t&&t!==r.getFieldValue(Tn)?n("Please ensure if password entered is correct & matching"):n()},a.validateToNextPassword=function(e,t,n){var r=a.props.form;t&&a.state.confirmDirty&&r.validateFields([An],{force:!0}),n()},a.state={confirmDirty:!1,autoCompleteResult:[],currPass:null,newPass:null,confirmPass:null},a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.props.form.validateFields()}},{key:"componentDidUpdate",value:function(e,t){e.show!==this.props.show&&this.props.form.validateFields()}},{key:"render",value:function(){var e=this,t=this.props.form,a=t.getFieldDecorator,n=t.getFieldError,r=t.isFieldTouched,i=this.props,s=i.show,l=i.isError,o=i.change_password_error,d=i.is_changing_password_error,u=void 0!==d&&d;if(!s)return null;var m={visible:s||l,title:"ChangePassword",onCancel:this.handleCancel,wrapClassName:"global-modal full-height",destroyOnClose:!0,bodyStyle:{height:"100%"},width:"480px",footer:(0,this.footer)(this.state.currPass,this.state.newPass,this.state.confirmPass)},p={};return jn.forEach(function(e){var t=r(e)&&n(e);p=Object(q.a)({},p,Object(re.a)({},e,t))}),c.a.createElement(Y.a,m,c.a.createElement("div",{className:"pl48 pr24"},c.a.createElement(z.a,{className:"event-form"},c.a.createElement(Nn,{label:"Current Password",validateStatus:p.currentPassword?"error":"",help:p.currentPassword||""},a("currentPassword",{rules:[{required:!0,message:"Please input current password!"}]})(c.a.createElement(le.a,{type:this.state.showCurrentPass?"plain":"password",onChange:function(t){t.preventDefault(),e.setState({currPass:t.target.value}),void 0===e.state.showCurrentPass&&e.setState({showCurrentPass:!1})},placeholder:"",suffix:c.a.createElement("img",{alt:"",onClick:this.hideShowCurrentPass,className:"clickable ".concat(void 0===this.state.showCurrentPass?"hidden":""),src:!0===this.state.showCurrentPass?On.a:Cn.a})}))),c.a.createElement(Nn,{label:"New Password",validateStatus:p[Tn]?"error":"",help:p[Tn]||""},a(Tn,{rules:[{required:!0,message:"Please enter your password!"},{min:6,message:"Password must be at least 6 characters"},{validator:this.validateToNextPassword}]})(c.a.createElement(le.a,{type:this.state.showNewPass?"plain":"password",onChange:function(t){t.preventDefault(),e.setState({newPass:t.target.value}),void 0===e.state.showNewPass&&e.setState({showNewPass:!1})},placeholder:"",suffix:c.a.createElement("img",{alt:"",onClick:this.hideShowNewPass,className:"clickable ".concat(void 0===this.state.showNewPass?"hidden":""),src:!0===this.state.showNewPass?On.a:Cn.a})}))),c.a.createElement(Nn,{label:"Confirm Password",validateStatus:p[An]?"error":"",help:p[An]||""},a(An,{rules:[{required:!0,message:"Please confirm your password!"},{validator:this.compareToFirstPassword}]})(c.a.createElement(le.a,{onBlur:this.handleConfirmBlur,type:this.state.showConfirmPass?"plain":"password",onChange:function(t){t.preventDefault(),e.setState({confirmPass:t.target.value}),void 0===e.state.showConfirmPass&&e.setState({showConfirmPass:!1})},placeholder:"",suffix:c.a.createElement("img",{alt:"",onClick:this.hideShowConfirmPass,className:void 0===this.state.showConfirmPass?"hidden":"",src:!0===this.state.showConfirmPass?On.a:Cn.a})})))),u&&c.a.createElement("div",{className:"w100 absolute flex row align-items-center justify-content-start",style:{backgroundColor:"#fff8f5",bottom:"70px",height:"40px",marginLeft:"-48px"}},c.a.createElement("div",{style:{display:"block",width:"13px",marginLeft:"24px",textAlign:"center"}},c.a.createElement("img",{alt:"",src:La.a,className:"w100",style:{display:"block"}})),c.a.createElement("div",{className:"fontsize12 medium warning-color ml8"},o.message))))}}]),t}(o.Component),Mn=z.a.create()(Object(d.d)(Dn)),In=a(26),wn=Object(T.b)(function(e){var t=e.modal,a=t.show,n=t.modalType,r=e.page.changePassword;return{show:a&&n===Z.n.CHANGE_PASSWORD,is_password_changing:r.is_password_changing,is_password_changed:r.is_password_changed,is_changing_password_error:r.is_changing_password_error,change_password_error:r.change_password_error}},function(e){return{close:function(){return e(Object(Ct.g)())},changePassword:function(t){return e(Object(In.b)(t))}}})(Mn),Sn=Object(d.c)({clinicalReading:{id:"app.modal.clinicalReading",defaultMessage:"Edit/Add Clinical Reading of patient(s)"},cancel:{id:"app.modal.cancel",defaultMessage:"Cancel"},submitButton:{id:"app.modal.submitButton",defaultMessage:"Submit"}}),kn=a(301),Pn="EDIT",Rn="suffix",xn="",Ln=se.a.Option,Un=c.a.createElement("img",{alt:"",src:Ye.a}),Fn=z.a.Item,Vn=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(s.a)(t).call(this,e))).handleCancel=function(e){e&&e.preventDefault();var t=a.props.close;a.setState({testToBeAdded:xn}),t()},a.handleSubmit=function(e){e.preventDefault();var t=a.props,n=t.UpdateClinicalReadingData,r=t.patient_id,i=t.medicals_data,s=t.close,l=i._id;a.props.form.validateFields(function(e,t){e||n(l,t,r)}),a.setState({testToBeAdded:xn}),s()},a.getParentNode=function(e){return e.parentNode},a.getInputFormElement=function(e,t,n){var r=[],i=a.props.form.getFieldDecorator;return Object(xt.a)(n,function(a,n){r.push(c.a.createElement("div",{key:n,className:"mb8 mt10"},c.a.createElement("div",{className:"content-space-between fontsize12 label-color pb5"},a.label),c.a.createElement(Fn,null,i(e+"."+t+"."+n,{initialValue:a.value})(c.a.createElement(le.a,{placeholder:""})),c.a.createElement("div",{className:"suffix-placeholder"},c.a.createElement("div",null,a.type)))))}),r},a.getReadingAttributeForTestReading=function(e,t){var n=[];return Object(xt.a)(t,function(t,r){n.push(c.a.createElement("div",{key:"".concat(e,".").concat(r),className:"mt10 mb30"},c.a.createElement("div",{className:"bold fontsize14"},t.label),a.getInputFormElement(e,r,t.content)))}),n},a.getClinicalReadingForm=function(e){var t=a.state.testToBeAdded,n=a.props,r=n.test_selected,i="";return i=n.purpose===Pn?r:t,a.getReadingAttributeForTestReading(i,e.content)},a.getseconreading=function(e,t,n){var r={},i=e[Rn],s=a.props,l=s.medicals_data,o=s.purpose,c=s.test_selected,d=void 0===c?"":c,u={};if(l&&o===Pn){var m=l.clinicalReadings;u=void 0===m?{}:m}var p={};return Object(xt.a)(e,function(e,a){if(a!==Rn){var n=(u[d]||{}).data;p[a]={value:Object(kn.a)(n,"".concat(t,".").concat(a),""),type:i,label:e}}}),r.content=p,r.label=n,r},a.gettestreading=function(e){var t={};return Object(xt.a)(e,function(e,n){e.hasOwnProperty("content")&&(t[n]=a.getseconreading(e.content,n,e.label))}),t},a.formatMessage=function(e){return a.props.intl.formatMessage(e)},a.footer=function(){var e=a.props.requesting,t=Object(Q.a)(Object(Q.a)(a)),n=t.formatMessage,r=t.handleCancel,i=t.handleSubmit;return c.a.createElement("div",{className:"flex align-items-center justify-content-end h72px mr24"},c.a.createElement(ee.a,{className:"iqvia-btn cancel mr8",onClick:r},n(Sn.cancel)),c.a.createElement(ee.a,{className:"iqvia-btn Submit",type:"primary",loading:e,onClick:i},n(Sn.submitButton)))},a.changeClinicalReadingType=function(e){a.setState({testToBeAdded:e})},a.getTestOptions=function(){var e=a.props,t=e.clinicalTestTemplates_data,n=e.medicals_data,r={};if(n){var i=n.clinicalReadings;r=void 0===i?{}:i}var s=Object.keys(r);return Object.keys(t).filter(function(e){return!s.includes(e)}).map(function(e,t){return c.a.createElement(Ln,{key:t,value:e},e)})},a.state={testTemplate:{},testToBeAdded:xn},a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidUpdate",value:function(e,t){this.props.clinicalTestTemplates_data!==e.clinicalTestTemplates_data&&this.setState({testTemplate:this.props.clinicalTestTemplates_data})}},{key:"render",value:function(){var e=this.props,t=e.show,a=e.isError,n=e.intl.formatMessage,r=e.test_selected,i=e.purpose;if(!1===t)return null;var s=this.handleCancel,l=this.footer,o=this.getTestOptions,d=this.state,u=d.testTemplate,m=d.testToBeAdded,p={};if(Object.keys(u).length>0&&(m!==xn||i===Pn)){var f="";f=i===Pn?r:m,p.type=u[f].label,p.content=this.gettestreading(u[f].content)}var v={visible:t||a,title:n(Sn.clinicalReading),okButtonProps:{},onCancel:s,wrapClassName:"global-modal full-height",destroyOnClose:!0,bodyStyle:{height:"100%",overflowY:"hidden"},width:"480px",footer:l()},h=o(),b=m!==xn||i===Pn;return c.a.createElement(Y.a,v,"ADD"===i&&c.a.createElement("div",{className:"pl48 pr24"},c.a.createElement(se.a,{className:"full-width iqvia-style-select fontsize14",suffixIcon:Un,onChange:this.changeClinicalReadingType,getPopupContainer:this.getParentNode},h)),c.a.createElement("div",{className:"pl48 pr24 clinical-reading-form"},b&&c.a.createElement(z.a,{className:"event-form"},this.getClinicalReadingForm(p))))}}]),t}(o.Component),_n=z.a.create()(Object(d.d)(Vn)),Bn=a(24),Yn=a(234),zn=Object(T.b)(function(e){var t=e.modal,a=e.medicals,n=e.clinicalTestTemplates,r=e.users,i=Object(Yn.a)(),s=Object(At.c)()(r,t.entityId),l=[];if(s){var o=s.programIds;o&&(l=n[o[0].id])}return{show:t.show&&t.modalType===Z.n.CLINICALREADING,requesting:t.requesting,patient_id:t.entityId,purpose:t.purpose,test_selected:t.data,clinicalTestTemplates_data:l,medicals_data:i(a,t.entityId)}},function(e){return{close:function(){return e(Object(Ct.g)())},UpdateClinicalReadingData:function(t,a,n){return e(Object(Bn.d)(t,a,n))}}})(_n),qn=a(171),Hn=Object(d.c)({endSurvey:{id:"app.modal.endSurvey",defaultMessage:"End Survey for"},cancel:{id:"app.modal.cancel",defaultMessage:"Go Back"},content:{id:"app.modal.content",defaultMessage:"Please note that the patients who have not taken survey will not be able to complete the survey."},message:{id:"app.modal.message",defaultMessage:"Do you still want to End Survey?"},alert:{id:"app.modal.alert",defaultMessage:"This action cannot be undone. For help, contact program admin"},endSurveyButton:{id:"app.modal.endSurveyButton",defaultMessage:"End Survey"}}),Wn=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,l=new Array(r),o=0;o<r;o++)l[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(l)))).handleCancel=function(e){e&&e.preventDefault(),(0,a.props.close)()},a.handleEndSurvey=function(){var e=Object(G.a)(W.a.mark(function e(t){var n,r,i;return W.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.props,r=n.surveyId,i=n.endSurveys,e.prev=1,e.next=4,i(r);case 4:window.location.href="/surveys/Completed",e.next=9;break;case 7:e.prev=7,e.t0=e.catch(1);case 9:case"end":return e.stop()}},e,this,[[1,7]])}));return function(t){return e.apply(this,arguments)}}(),a.formatMessage=function(e){return a.props.intl.formatMessage(e)},a.footer=function(){var e=a.props.requesting,t=Object(Q.a)(Object(Q.a)(a)),n=t.formatMessage,r=t.handleCancel,i=t.handleEndSurvey;return c.a.createElement("div",{className:"flex align-items-center justify-content-end h72px mr24"},c.a.createElement(ee.a,{className:"iqvia-btn cancel mr8",onClick:r},n(Hn.cancel)),c.a.createElement(ee.a,{className:"iqvia-btn warning",type:"primary",loading:e,onClick:i},n(Hn.endSurveyButton)))},a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.show,a=e.isError,n=e.intl.formatMessage,r=e.programId,i=e.programs_data,s=void 0===i?{}:i;if(!1===t)return null;var l="";Object(qn.a)(s)||(l=(s[r]||{}).name);var o=this.handleCancel,d=this.footer,u={visible:t||a,title:"".concat(n(Hn.endSurvey)," ").concat(l),okButtonProps:{},onCancel:o,wrapClassName:"global-modal full-height",destroyOnClose:!0,bodyStyle:{height:"100%"},width:"480px",footer:d()};return c.a.createElement(Y.a,u,c.a.createElement("div",{className:"black fontsize16 pl48 pr24 mt8"},n(Hn.content)),c.a.createElement("div",{className:"black fontsize16 pl48 pr24 mt16"},n(Hn.message)),c.a.createElement("div",{className:"flex align-items-center alert w100 pl24"},c.a.createElement("img",{alt:"alert",src:Mt.a,className:"mr16"}),c.a.createElement("div",{className:"steel-grey fontsize12"},n(Hn.alert))))}}]),t}(o.Component),Gn=Object(d.d)(Wn),Qn=a(21),Jn=Object(T.b)(function(e){var t=e.modal,a=e.programs;return{show:t.show&&t.modalType===Z.n.END_SURVEY,requesting:t.requesting,surveyId:t.entityId,programId:t.data,programs_data:a}},function(e){return{close:function(){return e(Object(Ct.g)())},endSurveys:function(t){return e(Object(Qn.f)(t))}}})(Gn),Kn=a(166),Xn=a(54),Zn=a.n(Xn),$n=(a(1253),a(216)),er=a.n($n),tr=Object(d.c)({cancelButton:{id:"app.modal.adverseEventImage.cancelButton",defaultMessage:"Cancel"},downloadAllButton:{id:"app.modal.adverseEventImage.downloadAllButton",defaultMessage:"Download All Images"},imagesFrom:{id:"app.modal.adverseEventImage.imagesFrom",defaultMessage:"Images From"},report:{id:"app.modal.adverseEventImage.report",defaultMessage:"report"},uploadedOn:{id:"app.modal.adverseEventImage.uploadedOn",defaultMessage:"Uploaded on"}}),ar=Za.a.BASE_DOC_URL,nr=new window.JSZip,rr=function(e){return new Promise(function(){var t=Object(G.a)(W.a.mark(function t(a){return W.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:Zn()({method:Z.y.GET,url:ar+e,responseType:"blob"}).then(function(t){nr.file(e,t.data),a()});case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}())},ir=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(s.a)(t).call(this,e))).formatMessage=function(e){return a.props.intl.formatMessage(e)},a.isPdf=function(){var e=a.state.docs,t=void 0===e?[]:e;t.length&&t[a.state.currentIndex].includes(".pdf")?a.setState({isPdf:!0,totalSize:t.length}):a.setState({isPdf:!1,totalSize:t.length}),a.getElementIntoView()},a.nextDocument=function(){if(a.state.currentIndex+1<a.state.totalSize){var e=a.state.currentIndex+1;a.setState({currentIndex:e},a.isPdf)}},a.previousDocument=function(){if(a.state.currentIndex-1>=0){var e=a.state.currentIndex-1;a.setState({currentIndex:e},a.isPdf)}},a.handleCancel=function(e){e&&e.preventDefault(),(0,a.props.close)()},a.getElementIntoView=function(){var e=a.state,t=e.currentIndex,n=e.docs,r=void 0===n?[]:n,i=document.getElementById(r[t]);i&&i.scrollIntoView({behavior:"smooth"})},a.getScroll=function(){var e=[],t=a.state,n=t.docs,r=void 0===n?[]:n,i=t.currentIndex;if(r.length>0)for(var s=0;s<r.length;s++){var l=r[s];e.push(c.a.createElement("div",{key:l,className:"preview-block"},c.a.createElement($a.a,{key:l,id:l,type:l.includes("pdf")?"pdf":"image",className:i===s?"case-image outline":"case-image",src:ar+l})))}return e},a.downloadAll=function(){var e=a.state.docs;return Promise.all(e.map(function(e){return rr(e)})).then(function(){console.log("sds",nr),nr.generateAsync({type:"blob"}).then(function(e){window.open(URL.createObjectURL(e),"_blank")})}).catch(function(e){console.log("error:",e)}),[]},a.footer=function(){var e=Object(Q.a)(Object(Q.a)(a)).formatMessage;return c.a.createElement("div",{className:"flex align-items-center justify-content-end h72px mr24"},c.a.createElement(ee.a,{ghost:!0,type:"primary iqvia-btn",onClick:a.handleCancel},e(tr.cancelButton)),c.a.createElement(ee.a,{type:"primary iqvia-btn",onClick:a.downloadAll},e(tr.downloadAllButton)))},a.state={isPdf:!1,currentIndex:0,totalSize:0,docs:[]},a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.isPdf()}},{key:"componentDidUpdate",value:function(e,t){if(e.adverseEventId!==this.props.adverseEventId){var a=this.props,n=a.events,r=(n=void 0===n?{}:n).events,i=a.adverseEventId,s=(r&&r[i]||{}).details,l=(s=void 0===s?{}:s).docs,o=void 0===l?[]:l,c=s.at;this.setState({docs:o,currentIndex:0,title:c},this.isPdf),nr=new window.JSZip}}},{key:"render",value:function(){var e=this.props.show,t=this.state,a=t.docs,n=t.currentIndex,r=t.isPdf,i=t.totalSize,s=t.title,l=this.formatMessage,o=a.length<1?0:this.state.currentIndex+1,d={visible:e,title:l(tr.imagesFrom)+er.a.format(s,"DD/MM/YYYY, h:mm a")+" "+l(tr.report),onCancel:this.handleCancel,wrapClassName:"global-modal",destroyOnClose:!0,bodyStyle:{height:"auto"},width:"1360px",footer:this.footer(),className:"adverse-event-image-modal"};return c.a.createElement(Y.a,d,c.a.createElement("div",{className:"adverse-event-image-modal-text"},c.a.createElement("div",{className:"text-left"},o," / ",i),c.a.createElement("div",{className:"text-right"},l(tr.uploadedOn)," ",er.a.format(s,"DD/MM/YYYY, h:mm a"))),c.a.createElement("div",{className:"document-wrapper"},r&&c.a.createElement("div",{className:"full-height"},c.a.createElement(ga,{doc:{file:a[n]},baseUrl:ar})),!r&&c.a.createElement("div",{className:""},c.a.createElement("img",{alt:"curr-docs",style:{height:"400px",width:"700px"},src:ar+a[n]}))),c.a.createElement("div",{className:"nav-container flex align-items-center justify-content-space-between"},c.a.createElement(Kn.a,{className:n-1<0?"icons disabled":"icons",onClick:this.previousDocument,type:"left"}),c.a.createElement("div",{className:"image-navigation-wrapper flex-1"},c.a.createElement("div",{className:"image-navigation"},a.length>0&&this.getScroll())),c.a.createElement(Kn.a,{className:n+1>=i?"icons disabled":"icons",onClick:this.nextDocument,type:"right"})))}}]),t}(o.Component),sr=Object(d.d)(ir),lr=Object(T.b)(function(e){var t=e.modal,a=e.users,n=e.events;return{show:t.show&&t.modalType===Z.n.ADVERSE_EVENT_IMAGE_MODAL,requesting:t.requesting,purpose:t.purpose,patientId:t.entityId,users:a,adverseEventId:t.data,events:n}},function(e){return{close:function(){return e(Object(Ct.g)())}}})(sr),or=a(861),cr=a(355),dr=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return c.a.createElement(or.a,null,c.a.createElement(o.Fragment,null,c.a.createElement(B,null),c.a.createElement(o.Fragment,null,c.a.createElement(cr.a,null),c.a.createElement(Tt,null),c.a.createElement(kt,null),c.a.createElement(qt,null),c.a.createElement(ca,null),c.a.createElement(bn,null),c.a.createElement(ln,null),c.a.createElement(zn,null),c.a.createElement(Ba,null),c.a.createElement(Xt,null),c.a.createElement(na,null),c.a.createElement(wn,null),c.a.createElement(Jn,null),c.a.createElement(lr,null))))}}]),t}(o.Component);t.default=Object(d.d)(dr)},234:function(e,t,a){"use strict";a.d(t,"a",function(){return i});var n=a(253),r=function(e,t){return e[t]},i=function(){return Object(n.a)([r],function(e){return e})}},256:function(e,t,a){},257:function(e,t,a){"use strict";a.d(t,"a",function(){return u}),a.d(t,"f",function(){return m}),a.d(t,"e",function(){return p}),a.d(t,"d",function(){return f}),a.d(t,"b",function(){return v}),a.d(t,"c",function(){return h});var n=a(253),r=a(171),i=function(e,t,a){if(!t)return{};var n={},r=e[t];if(r){var i=r.programIds,s=void 0===i?[]:i;s.length>0&&(n=a[s[0].id])}return n},s=function(e){if(Object(r.a)(e))return{};var t={};return Object.keys(e).forEach(function(a){var n=e[a];-1===["basicInfo","products","programDoctors","programPatients"].indexOf(a)&&(t[a]=n)}),t},l=function(e,t){if(Object(r.a)(e))return{};var a=e[t];return a||{}},o=function(e,t,a){if(Object(r.a)(e))return[];var n=e[t];return n?n.products.map(function(e){return a[e]}):[]},c=function(e,t,a){if(Object(r.a)(e))return{};var n=e[t];if(n){var i=[],s=n.patients;return(void 0===s?[]:s).forEach(function(e){var t=a[e];t&&i.push(t)}),i}return[]},d=function(e,t,a){if(Object(r.a)(e))return[];var n=e[t];if(n){var i=n.doctors,s=[];return(void 0===i?[]:i).forEach(function(e){var t=e._id;if(t){var n=a[t];n&&s.push(n)}}),s}return[]},u=function(){return Object(n.a)([i],function(e){var t=e.products;return void 0===t?[]:t})},m=function(){return Object(n.a)([s],function(e){return e})},p=function(){return Object(n.a)([l],function(e){return e})},f=function(){return Object(n.a)([o],function(e){return e})},v=function(){return Object(n.a)([d],function(e){return e})},h=function(){return Object(n.a)([c],function(e){return e})}},355:function(e,t,a){"use strict";var n=a(45),r=a(68),i=a(174),s=a(177),l=a(6),o=a.n(l),c=(a(1255),a(215)),d=a.n(c),u=function(e){var t=e.msg,a=e.close;return t?(a&&setTimeout(a,4e3),o.a.createElement("div",{className:"iqvia-successful-msg"},o.a.createElement("div",{className:"flex  pr8 pl24 pt12 pb12"},o.a.createElement(i.a,{className:"w100"},o.a.createElement(s.a,{xs:12,sm:12,md:10,lg:10,xl:10,xxl:10},o.a.createElement("div",null,o.a.createElement("img",{alt:"",src:d.a,className:"mr8 inline"}),o.a.createElement("div",{className:"fontsize12 medium successfull-color inline"},t))))))):null};t.a=Object(n.b)(function(e){return{msg:e.successMsg.msg}},function(e){return{close:function(){return e(Object(r.a)())}}})(u)},560:function(e,t,a){"use strict";var n=a(45),r=a(274),i=a(147),s=a(148),l=a(151),o=a(149),c=a(150),d=a(237),u=a(6),m=a.n(u),p=a(28),f=a(304),v=a(46),h=a.n(v),b=Object(p.c)({cancel:{id:"calendarCard.appointment.cancel",defaultMessage:"Cancel Appointment"},reschedule:{id:"calendarCard.appointment.reschedule",defaultMessage:"Reschedule appointment"},rescheduleAll:{id:"calendarCard.appointment.rescheduleAll",defaultMessage:"Reschedule all Appointments"},rescheduleThis:{id:"calendarCard.appointment.rescheduleThis",defaultMessage:"Reschedule this Appointment"},editNotes:{id:"calendarCard.appointment.editNotes",defaultMessage:"Edit Notes"},updateVitals:{id:"calendarCard.appointment.updateVitals",defaultMessage:"Update Vitals"},updateMedication:{id:"calendarCard.appointment.updateMedication",defaultMessage:"Update Medication"},updateClinicalReadings:{id:"calendarCard.appointment.updateClinicalReadings",defaultMessage:"Update Clinical Readings"},doneButton:{id:"calendarCard.appointment.doneButton",defaultMessage:"Mark as done"},undoButton:{id:"calendarCard.appointment.undoButton",defaultMessage:"Undo"},joinCallButton:{id:"calendarCard.appointment.joinCallButton",defaultMessage:"Join Call"},scheduledBy:{id:"calendarCard.appointment.scheduledBy",defaultMessage:"Scheduled by"},markAsDoneBy:{id:"calendarCard.appointment.markAsDoneBy",defaultMessage:"Mark as done by"}}),g=a(154),E=a(1746),O=a(270),y=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(o.a)(t).call(this,e))).formatMessage=function(e){return a.props.intl.formatMessage(e)},a.handleMarkAsDone=function(){(0,a.props.handleMarkAsDone)()},a.handleUndo=function(){(0,a.props.handleUndo)()},a.state={},a}return Object(c.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.formatMessage,t=this.handleUndo,a=this.handleMarkAsDone,n=this.props,r=n.data,i=(r=void 0===r?{}:r).type,s=r.disabled,l=n.event,o=(l=void 0===l?{}:l).id;switch(i){case O.a.JOIN_CALL:return m.a.createElement("div",{className:"calendar-card-button"},m.a.createElement(E.a,{to:"/remoteConsulting/".concat(o),target:"_blank"},m.a.createElement(g.a,{className:"done-button",disabled:s},e(b.joinCallButton))));case O.a.MARK_AS_DONE:return m.a.createElement("div",{className:"calendar-card-button"},m.a.createElement(g.a,{disabled:s,onClick:a,className:"done-button"},e(b.doneButton)));case O.a.UNDO:return m.a.createElement("div",{className:"calendar-card-button"},m.a.createElement(g.a,{disabled:s,onClick:t,className:"undo-button"},e(b.undoButton)));default:return null}}}]),t}(u.Component),C=Object(p.d)(y),N=a(158),A=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(o.a)(t).call(this,e))).formatMessage=function(e){return a.props.intl.formatMessage(e)},a.handleEditNotes=function(){(0,a.props.editNotes)()},a.handleCancel=function(){(0,a.props.handleCancel)()},a.handleRescheduleThis=function(){(0,a.props.handleRescheduleThis)()},a.handleRescheduleAll=function(){(0,a.props.handleRescheduleAll)()},a.handleUpdateVitals=function(){(0,a.props.handleUpdateVitals)()},a.handleUpdateMedication=function(){(0,a.props.handleUpdateMedication)()},a.handleUpdateClinicalReading=function(){(0,a.props.handleUpdateClinicalReading)()},a.moreOptions=function(e){var t=Object(N.a)(Object(N.a)(a)),n=t.formatMessage,r=t.handleUpdateClinicalReading,i=t.handleUpdateMedication,s=t.handleUpdateVitals,l=t.handleRescheduleAll,o=t.handleRescheduleThis,c=t.handleEditNotes,d=t.handleCancel;switch(e){case O.a.EDIT_NOTES_OF_APPOINTMENT:return m.a.createElement("div",{key:e,className:"drop-down",onClick:c},n(b.editNotes)," ");case O.a.CANCEL_APPOINTMENT:return m.a.createElement("div",{key:e,className:"drop-down cancel",onClick:d},n(b.cancel));case O.a.RESCHEDULE_APPOINTMENT:return m.a.createElement("div",{key:e,className:"drop-down",onClick:o},n(b.reschedule));case O.a.RESCHEDULE_THIS_APPOINTMENT:return m.a.createElement("div",{key:e,className:"drop-down",onClick:o},n(b.rescheduleThis));case O.a.RESCHEDULE_ALL_APPOINTMENT:return m.a.createElement("div",{key:e,className:"drop-down",onClick:l},n(b.rescheduleAll));case O.a.UPADTE_VITALS:return m.a.createElement("div",{key:e,className:"drop-down",onClick:s},n(b.updateVitals));case O.a.UPDATE_CLINICAL_READING:return m.a.createElement("div",{key:e,className:"drop-down",onClick:r},n(b.updateClinicalReadings));case O.a.UPDATE_MEDICATION:return m.a.createElement("div",{key:e,className:"drop-down",onClick:i},n(b.updateMedication));default:return null}},a.state={},a}return Object(c.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props.actions;return(void 0===t?[]:t).map(function(t){return e.moreOptions(t)})}}]),t}(u.Component),T=Object(p.d)(A),j=a(2),D=a(303),M=a.n(D),I=m.a.createElement("img",{className:"icon-activity-modes",alt:"",src:M.a}),w=m.a.createElement("img",{className:"icon-activity-modes",alt:"",src:M.a}),S=m.a.createElement("img",{className:"icon-activity-modes",alt:"",src:M.a}),k=function(e){var t=e.event,a=(t=void 0===t?{}:t).data;switch((a=void 0===a?{}:a).activityType){case j.c.MEDICATION:return I;case j.c.MATERIAL_DELIVERY:return S;case j.c.FOLLOWUP:return w;default:return null}},P=a(388),R=a.n(P),x=a(389),L=a.n(x),U=a(390),F=a.n(U),V=a(391),_=a.n(V),B=a(392),Y=a.n(B),z=a(393),q=a.n(z),H=m.a.createElement("img",{className:"icons",alt:"",src:R.a}),W=m.a.createElement("img",{className:"icons",alt:"",src:L.a}),G=m.a.createElement("img",{className:"icons",alt:"",src:F.a}),Q=m.a.createElement("img",{className:"icons",alt:"",src:_.a}),J=m.a.createElement("img",{className:"icons",alt:"",src:Y.a}),K=m.a.createElement("img",{className:"icons",alt:"",src:q.a}),X=function(e){var t=e.event,a=(t=void 0===t?{}:t).status,n=t.data;switch((n=void 0===n?{}:n).activityMode){case j.k.ACTIVITY_MODE.CALL:return a===j.k.STATUS.PASSED?Q:G;case j.k.ACTIVITY_MODE.VISIT:return a===j.k.STATUS.PASSED?W:H;case j.k.ACTIVITY_MODE.CHAT:return a===j.k.STATUS.PASSED?K:J;default:return null}},Z=a(860),$=a(183),ee=a.n($),te=d.a.Meta,ae=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(o.a)(t).call(this,e))).formatMessage=function(e){return a.props.intl.formatMessage(e)},a.handleClick=function(){a.setState({visible:!a.state.visible})},a.handleCardClick=function(){a.setState({cardClicked:!0})},a.handleLeave=function(){a.setState({visible:!1,cardClicked:!1})},a.handleEditNotes=function(){(0,a.props.editNotes)()},a.handleCancel=function(){(0,a.props.openCancelModal)()},a.handleMarkAsDone=function(){(0,a.props.setAppointmentStatus)(j.k.STATUS.COMPLETED)},a.handleUndo=function(){var e=a.props,t=e.setAppointmentStatus,n=e.event,r=n.startTime,i=n.endTime,s=h()();console.log(s,h()(i)),h()(i).isBefore(s)?t(j.k.STATUS.PASSED):h()(r).isAfter(s)?t(j.k.STATUS.PENDING):h()(r).isBefore(s)&&h()(i).isAfter(s)&&t(j.k.STATUS.STARTED)},a.handleRescheduleThis=function(){(0,a.props.rescheduleEvent)(!1)},a.handleRescheduleAll=function(){(0,a.props.rescheduleEvent)(!0)},a.getPatientId=function(){var e=a.props,t=e.participantOne,n=(t=void 0===t?{}:t).basicInfo,r=(n=void 0===n?{}:n).category,i=n._id,s=e.participantTwo,l=(s=void 0===s?{}:s).basicInfo,o=(l=void 0===l?{}:l)._id;return r===j.D.PATIENT?i:o},a.handleUpdateVitals=function(){var e=a.props.viewer,t=(e=void 0===e?{}:e).basicInfo,n=(t=void 0===t?{}:t).category,r=void 0===n?{}:n,i=a.getPatientId();r===j.D.CARE_COACH?a.props.history.push({pathname:"/patient/".concat(i,"/Medical-Details"),state:{currentMedicalField:"Vital"}}):r===j.D.PATIENT&&a.props.history.push("/medicals/Vital")},a.handleUpdateMedication=function(){var e=a.props.viewer,t=(e=void 0===e?{}:e).basicInfo,n=(t=void 0===t?{}:t).category,r=void 0===n?{}:n,i=a.getPatientId();r===j.D.CARE_COACH?a.props.history.push({pathname:"/patient/".concat(i,"/Medical-Details"),state:{currentMedicalField:"Medication"}}):r===j.D.PATIENT&&a.props.history.push("/medicals/Medication")},a.handleUpdateClinicalReading=function(){var e=a.props.viewer,t=(e=void 0===e?{}:e).basicInfo,n=(t=void 0===t?{}:t).category,r=void 0===n?{}:n,i=a.getPatientId();r===j.D.CARE_COACH?a.props.history.push({pathname:"/patient/".concat(i,"/Medical-Details"),state:{currentMedicalField:"Clinical-Reading"}}):r===j.D.PATIENT&&a.props.history.push("/medicals/Clinical-Reading")},a.getAppointmentWithCategoryText=function(e){var t=e.basicInfo;switch((t=void 0===t?{}:t).category){case j.D.CARE_COACH:return"Coach";case j.D.DOCTOR:return"Doctor";case j.D.PATIENT:return"Patient";default:return null}},a.state={visible:!1,cardClicked:!1,modalOpen:!1},a}return Object(c.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.event,a=void 0===t?{}:t,n=e.modal,i=void 0!==n&&n,s=e.hideAction,l=void 0!==s&&s,o=a.id,c=a.status,p=new Z.a(this.props),f=this.handleCancel,v=this.handleUpdateClinicalReading,h=this.handleUpdateMedication,g=this.handleUpdateVitals,E=this.handleRescheduleThis,O=this.handleRescheduleAll,y=this.handleEditNotes,N=this.handleClick,A=this.handleLeave,D=this.handleCardClick,M=this.formatMessage,I=p.getStartTime(),w=p.getNotes(),S=p.getStatus(),P=p.getActivityName(),R=p.getActivityTypeName(),x=p.getEventDuration(),L=p.getLastActedUser(),U=p.getAppointmentWithTag(),F=U.basicInfo,V=(F=void 0===F?{}:F).name,_=F.profilePicLink,B=void 0===_?ee.a:_,Y=this.getAppointmentWithCategoryText(U),z=c===j.k.STATUS.COMPLETED?M(b.markAsDoneBy):M(b.scheduledBy),q=this.state.visible;return m.a.createElement(u.Fragment,null,m.a.createElement(d.a,{onMouseLeave:i?null:A,onClick:D,className:"calender-card",hoverable:!l,title:[m.a.createElement("div",{key:o},m.a.createElement("div",{className:"card-top"},z," ",L),m.a.createElement("div",{className:"card-title"},m.a.createElement(X,{event:a}),m.a.createElement("span",{className:"time-text"},I,", ",x),m.a.createElement("div",{className:"status ".concat(c===j.k.STATUS.COMPLETED||c===j.k.STATUS.STARTED?"status-completed":c===j.k.STATUS.PASSED?"status-overdue":"status-upcoming")},S),!l&&m.a.createElement(C,{event:a,data:p.getAction(),handleMarkAsDone:this.handleMarkAsDone,handleUndo:this.handleUndo})),m.a.createElement("div",{className:"card-cover"},m.a.createElement("span",{className:"coach-activity"},Y," ",P),m.a.createElement("span",{className:"coach-avatar"},m.a.createElement(r.a,{src:B}),V),m.a.createElement("div",{className:"card-modal-options"},m.a.createElement("div",{className:"card-activity"},m.a.createElement(k,{event:a}),m.a.createElement("span",null,R)),!0!==l&&m.a.createElement("div",{className:"more-options"},m.a.createElement("div",{className:"mr25",onClick:N},m.a.createElement("span",null,q?"":"More Options"))))))]},!l&&m.a.createElement(te,{description:w?[m.a.createElement("div",{key:o,className:"card-meta text-overflow break-word"},m.a.createElement("div",{className:q?"visible":"invisible"},w))]:[]}),!l&&m.a.createElement(u.Fragment,null,m.a.createElement("div",{key:o,className:"options"},m.a.createElement("div",{className:"more-options"},q?m.a.createElement("hr",null):"",m.a.createElement("div",{onClick:N},m.a.createElement("span",null,q?"Less Options":""))),q&&m.a.createElement(T,Object.assign({actions:p.getMoreOption()},this.props,{editNotes:y,handleCancel:f,handleRescheduleThis:E,handleRescheduleAll:O,handleUpdateVitals:g,handleUpdateMedication:h,handleUpdateClinicalReading:v}))))))}}]),t}(u.Component),ne=Object(f.a)(Object(p.d)(ae)),re=a(8),ie=a(19);t.a=Object(n.b)(function(e){var t=e.events,a=(t=void 0===t?{}:t).events,n=e.users,r=e.auth;return{events:a,users:n,viewerId:(r=void 0===r?{}:r).authenticated_user}},function(e){return{openCancelModal:function(t,a){return function(){return e(Object(ie.i)(j.n.CANCEL_APPOINTMENT,t,null,a))}},rescheduleEvent:function(t){return function(a){return e(Object(ie.i)(j.n.EVENT_MODAL,t,j.l.RESCHEDULE,{series:a}))}},editNotes:function(t){return function(){return e(Object(ie.i)(j.n.EVENT_MODAL,t,j.l.EDIT_NOTES))}},setAppointmentStatus:function(t){return function(a){return e(Object(re.A)({eventId:t,status:a}))}}}},function(e,t,a){var n=a.id,r=a.calendarUserId,i=a.hideAction,s=void 0!==i&&i,l=a.modal,o=e.users,c=e.events,d=e.viewerId,u=c[n]||{},m=t.editNotes,p=t.openCancelModal,f=t.setAppointmentStatus,v=t.rescheduleEvent,h=u.data,b=(h=void 0===h?{}:h).participantOne,g=h.participantTwo,E=o[d]||{},O=o[b]||{},y=o[g]||{},C=o[r]||{},N=m(n),A=p(n,r),T=f(n),D=v(n),M=C.status;return{viewer:E,participantOne:O,participantTwo:y,calendarUser:C,hideAction:s||M===j.E.DISCHARGED,modal:l,event:u,editNotes:N,openCancelModal:A,setAppointmentStatus:T,rescheduleEvent:D}})(ne)},564:function(e,t,a){"use strict";var n=a(45),r=a(399),i=a(274),s=a(147),l=a(148),o=a(151),c=a(149),d=a(150),u=a(237),m=a(6),p=a.n(m),f=a(304),v=a(28),h=Object(v.c)({cancel:{id:"calendarCard.reminder.cancel",defaultMessage:"Cancel Reminder"},reschedule:{id:"calendarCard.reminder.reschedule",defaultMessage:"Reschedule reminder"},rescheduleThis:{id:"calendarCard.reminder.rescheduleThis",defaultMessage:"Reschedule this reminder"},rescheduleAll:{id:"calendarCard.reminder.rescheduleAll",defaultMessage:"Reschedule All Reminder"},editNotes:{id:"calendarCard.reminder.editNotes",defaultMessage:"Edit Notes"},addNotes:{id:"calendarCard.reminder.addNotes",defaultMessage:"Add Notes"},editReminder:{id:"calendarCard.reminder.editReminder",defaultMessage:"Edit Reminder"},deleteReminder:{id:"calendarCard.reminder.deleteReminder",defaultMessage:"Delete Reminder"},scheduledBy:{id:"calendarCard.reminder.scheduledBy",defaultMessage:"Scheduled by"}}),b=a(2),g=a(398),E=a.n(g),O=a(183),y=a.n(O),C=a(691),N=a(158),A=a(490),T=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(o.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(r)))).formatMessage=function(e){return a.props.intl.formatMessage(e)},a.handleEditNotes=function(e){e.preventDefault(),(0,a.props.editNotes)()},a.handleReschedule=function(e){e.preventDefault(),(0,a.props.rescheduleEvent)(!1)},a.handleRescheduleAll=function(e){e.preventDefault(),(0,a.props.rescheduleEvent)(!0)},a.handleCancel=function(e){e.preventDefault(),(0,a.props.openCancelModal)()},a.moreOptions=function(e){var t=Object(N.a)(Object(N.a)(a)),n=t.formatMessage,r=t.handleReschedule,i=t.handleRescheduleAll,s=t.handleEditNotes,l=t.handleCancel;switch(e){case A.a.EDIT_NOTES_OF_REMINDER:return p.a.createElement("div",{key:e,className:"drop-down",onClick:s},n(h.editNotes)," ");case A.a.CANCEL_REMINDER:return p.a.createElement("div",{key:e,className:"drop-down cancel",onClick:l},n(h.cancel));case A.a.RESCHEDULE_REMINDER:return p.a.createElement("div",{key:e,className:"drop-down",onClick:r},n(h.reschedule));case A.a.RESCHEDULE_THIS_REMINDER:return p.a.createElement("div",{key:e,className:"drop-down",onClick:r},n(h.rescheduleThis));case A.a.RESCHEDULE_ALL_REMINDER:return p.a.createElement("div",{key:e,className:"drop-down",onClick:i},n(h.rescheduleAll));default:return null}},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.actions;return(void 0===t?[]:t).map(function(t){return e.moreOptions(t)})}}]),t}(m.Component),j=Object(v.d)(T),D=p.a.createElement("img",{className:"icons",alt:"",src:E.a}),M=u.a.Meta,I=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(c.a)(t).call(this,e))).formatMessage=function(e){return a.props.intl.formatMessage(e)},a.handleClick=function(){a.setState({visible:!a.state.visible})},a.handleCardClick=function(){a.setState({cardClicked:!0})},a.handleLeave=function(){a.setState({visible:!1,cardClicked:!1})},a.state={visible:!1,cardClicked:!1,modalOpen:!1},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"getReminderWithCategoryText",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).basicInfo;switch((e=void 0===e?{}:e).category){case b.D.CARE_COACH:return"Coach";case b.D.DOCTOR:return"Doctor";case b.D.PATIENT:return"Patient";default:return null}}},{key:"render",value:function(){var e=this.props,t=e.event,a=void 0===t?{}:t,n=e.hideAction,r=void 0!==n&&n,s=e.modal,l=void 0!==s&&s,o=this.handleClick,c=this.handleLeave,d=this.handleCardClick,f=this.formatMessage,v=a.id,b=new C.a(this.props),g=b.getStartTime(),E=b.getStartDate(),O=b.getNotes(),N=b.getLastActedUser(),A=b.getReminderWithTag(),T=b.getReminderTitle(),I=(A||{}).basicInfo,w=(I=void 0===I?{}:I).name,S=I.profilePicLink,k=void 0===S?y.a:S,P=this.getReminderWithCategoryText(A),R=this.state.visible;return p.a.createElement(m.Fragment,null,p.a.createElement(u.a,{onMouseLeave:l?null:c,onClick:d,className:"calender-card",hoverable:!r,title:[p.a.createElement("div",{key:v},p.a.createElement("div",{className:"card-top"},f(h.scheduledBy)," ",N),p.a.createElement("div",{className:"card-title"},D,p.a.createElement("span",{className:"time-text"},g,", ",E)),p.a.createElement("div",{className:"card-modal-options"},p.a.createElement("div",{className:"card-cover"},p.a.createElement("div",{className:"coach-activity-reminder"},T?T.length<30?T:T.substr(0,30)+"...":null),A&&p.a.createElement(m.Fragment,null,p.a.createElement("span",{className:"coach-activity"},P),p.a.createElement("span",{className:"coach-avatar"},p.a.createElement(i.a,{src:k}),w))),!0!==r&&p.a.createElement("div",{className:"more-options mt12"},p.a.createElement("div",{className:"mr25",onClick:o},p.a.createElement("span",null,R?"":"More Options")))))]},!r&&p.a.createElement(M,{description:O?[p.a.createElement("div",{key:v,className:"card-meta text-overflow break-word"},p.a.createElement("div",{className:R?"visible":"invisible"},O))]:[]}),!r&&p.a.createElement(m.Fragment,null,p.a.createElement("div",{key:v,className:"options"},p.a.createElement("div",{className:"more-options"},R?p.a.createElement("hr",null):"",p.a.createElement("div",{onClick:o},p.a.createElement("span",null,R?"Less Options":""))),R&&p.a.createElement(j,Object.assign({actions:b.getMoreOption()},this.props))))))}}]),t}(m.Component),w=Object(f.a)(Object(v.d)(I)),S=a(19);t.a=Object(r.a)(Object(n.b)(function(e){var t=e.events,a=(t=void 0===t?{}:t).events,n=e.users,r=e.auth;return{events:a,users:n,viewer_id:(r=void 0===r?{}:r).authenticated_user}},function(e){return{openCancelModal:function(t,a){return function(){return e(Object(S.i)(b.n.CANCEL_APPOINTMENT,t,null,a))}},rescheduleEvent:function(t){return function(a){return e(Object(S.i)(b.n.EVENT_MODAL,t,b.l.RESCHEDULE,{series:a}))}},editNotes:function(t){return function(){return e(Object(S.i)(b.n.EVENT_MODAL,t,b.l.EDIT_NOTES))}}}},function(e,t,a){var n=a.id,r=a.calendarUserId,i=a.hideAction,s=void 0!==i&&i,l=a.modal,o=e.users,c=e.events,d=e.viewer_id,u=c[n]||{},m=u.data,p=(m=void 0===m?{}:m).participantOne,f=m.participantTwo,v=o[d]||{},h=o[p]||{},g=o[f]||{},E=o[r]||{},O=t.editNotes,y=t.openCancelModal,C=t.rescheduleEvent,N=O(n),A=y(n,r),T=C(n),j=E.status;return{viewer:v,participantOne:h,participantTwo:g,calendarUser:E,hideAction:s||j===b.E.DISCHARGED,modal:l,event:u,openCancelModal:A,rescheduleEvent:T,editNotes:N}})(w))}}]);
//# sourceMappingURL=DesktopWrapper.f9c04cdf.chunk.js.map